let gridOptions;function asignarEventos(){$(".pilotosSearch").hide(),document.addEventListener("keydown",a=>{"Escape"===a.key&&resetForm()}),document.getElementById("empleado_id").addEventListener("mousedown",(async function(a){a.preventDefault(),$(".pilotosSearch").show(),$(".inPilotoSrch").focus();let e=await obtenerEmpleados();console.log(e);await mostrarListaSearch(e,".pilotosSearch","empleado_id","nombre")}))}function configurarBotones(){$(".contenedor-altas").hide(),$("#crear-piloto").click(mostrarContenedorAltas),$(".btn-cancelar").click(a=>{resetForm()}),$("#btnGuardar").click(a=>{validateInputs($("#formAltas"))&&(""==$("#piloto_id").val()?crearPiloto():actualizarPiloto())})}function inicializarPagina(){iniciarTabla("",[{headerName:"id",field:"piloto_id",width:80},{headerName:"Nombre",field:"empleado_nombre",width:150},{headerName:"Licencia",field:"licencia",width:120},{headerName:"Tipo Licencia",field:"tipo_licencia",width:130},{headerName:"Estatus",field:"estatus",width:150},{headerName:"Horas Vuelo",field:"horas_vuelo",width:120},{headerName:"Acción",cellRenderer:function(a){const e=document.createElement("I");e.className="fa-regular fa-pen-to-square btn btn-editar",e.title="Editar",e.addEventListener("click",(async function(){await mostrarContenedorAltas(),$("#piloto_id").val(a.data.piloto_id),$("#licencia").val(a.data.licencia),$("#tipo_licencia").val(a.data.tipo_licencia),$("#vence_licencia").val(a.data.vence_licencia),$("#horas_vuelo").val(a.data.horas_vuelo),$("#estatus").val(a.data.estatus),$("#empleado_id option").val(a.data.empleado_id),$("#empleado_id option").text(a.data.empleado_nombre)}));const o=document.createElement("div");return o.classList="btn-cont centrado",o.appendChild(e),o},width:150,headerClass:"txt-center",cellClass:"custom-action-cell",filter:!1}],"#myGrid"),traePilotos()}function resetForm(){cerrarVentana(".contenedor-altas",["#formAltas"])}async function mostrarContenedorAltas(){$(".contenedor-altas").show(),await obtenerEmpleados()}async function traePilotos(){try{const a=await fetch("allPilotos",{method:"GET"}),e=await a.json();let o=verificarArray(e);gridApi.setGridOption("rowData",o)}catch(a){console.error(a),SwalToast("warning","Error al obtener los datos",2500)}}async function obtenerEmpleados(){try{const a=await fetch("empleados/activos",{method:"GET"}),e=await a.json();return!e.length>0&&SwalToast("warning","No hay Programas disponibles.",2500),e}catch(a){console.error(a),SwalLoad("error","Ocurrio Un Error","Conección Perdida a BD.",!1)}}async function crearPiloto(){const a=$("#licencia").val(),e=$("#tipo_licencia").val(),o=$("#vence_licencia").val(),t=$("#horas_vuelo").val(),i=$("#empleado_id").val(),r=$("#estatus").val();try{const n=new FormData;n.append("licencia",a),n.append("tipo_licencia",e),n.append("vence_licencia",o),n.append("horas_vuelo",t),n.append("empleado_id",i),n.append("estatus",r);const l=await fetch("crear/piloto",{method:"POST",body:n}),c=await l.json();1==c.exito?(SwalLoad("success","Éxito","Registro Creado Correctamente",!1),setTimeout(()=>{swal.close(),resetForm(),traePilotos()},1500)):0==c.exito&&SwalLoad("error","Error en la Transacción",c.errorSMS,!0),c.alertas&&SwalToast("warning",c.alertas.error,2500)}catch(a){console.error(a),SwalLoad("error","Error en la Conexión","Comunicate con el Administrador",!1)}}async function actualizarPiloto(){const a=$("#piloto_id").val(),e=$("#licencia").val(),o=$("#tipo_licencia").val(),t=$("#vence_licencia").val(),i=$("#horas_vuelo").val(),r=$("#empleado_id").val(),n=$("#estatus").val();try{const l=new FormData;l.append("piloto_id",a),l.append("licencia",e),l.append("tipo_licencia",o),l.append("vence_licencia",t),l.append("horas_vuelo",i),l.append("empleado_id",r),l.append("estatus",n);const c=await fetch("actualizar/piloto",{method:"POST",body:l}),s=await c.json();1==s.exito?(SwalLoad("success","Éxito","Registro Actualizado Correctamente",!1),setTimeout(()=>{swal.close(),resetForm(),traePilotos()},1500)):0==s.exito&&SwalLoad("error","Error en la Transacción",s.errorSMS,!0),s.alertas&&SwalToast("warning",s.alertas.error,2500)}catch(a){console.error(a),SwalLoad("error","Error en la Conexión","Comunicate con el Administrador",!1)}}$((function(){asignarEventos(),inicializarPagina(),configurarBotones()}));
//# sourceMappingURL=pilotos.js.map
