{"version":3,"sources":["clientes.js"],"names":["gridOptions","currentStep","asignarEventos","$","hide","document","addEventListener","e","key","resetForm","getElementById","async","event","preventDefault","show","focus","data","obtenerPreferencia","mostrarListaSearch","configurarBotones","click","mostrarContenedorAltas","validar","validateInputs","updateActiveClass","updateRemoveClass","val","crearCliente","actualizarCliente","inicializarPagina","iniciarTabla","headerName","field","width","cellRenderer","params","editButton","createElement","className","title","cliente_id","nombre","apellido","sexo","fecha_nacimiento","estatus","email","telefono","pais","ciudad","codigo_postal","estado","colonia","calle","num_ext","num_int","rfc","curp","regimen_fiscal","razon_social","tarifa_id","text","tipo_nombre","actionContainer","classList","appendChild","headerClass","cellClass","filter","traeClientes","cerrarVentana","removeClass","addClass","obtenerEmpresas","respuesta","fetch","method","json","convert","verificarArray","gridApi","setGridOption","error","console","SwalToast","length","SwalLoad","preferencia_id","datos","FormData","append","body","exito","setTimeout","swal","close","errorSMS","alertas"],"mappings":"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","file":"clientes.js","sourcesContent":["let gridOptions;\r\nlet currentStep = 1;\r\n\r\n// Utilizando el Principio de Modularidad\r\n$(function () {\r\n    asignarEventos();\r\n    inicializarPagina();\r\n    configurarBotones();\r\n});\r\n\r\nfunction asignarEventos() {\r\n    // Ocultar Listados\r\n    $('.empresaSearch').hide();\r\n    $('.prefSearch').hide();\r\n\r\n    document.addEventListener(\"keydown\", e => {\r\n        if (e.key === 'Escape') {\r\n            resetForm();\r\n        }\r\n    });\r\n \r\n    // Lista Preferencia\r\n    document.getElementById(\"preferencia_id\").addEventListener(\"mousedown\", async function (event) {\r\n        event.preventDefault();\r\n        $('.prefSearch').show();\r\n        $('.inPrefSrch').focus();\r\n        let data = await obtenerPreferencia();\r\n        const listSearch = await mostrarListaSearch(data, '.prefSearch', 'tipo_id', 'nombre');\r\n    });\r\n}\r\n\r\nfunction configurarBotones() {\r\n    $(\".contenedor-altas\").hide();\r\n\r\n    $(\"#crear-cliente\").click(mostrarContenedorAltas);\r\n\r\n    $(\".btn-next\").click(function (e) {\r\n        e.preventDefault(); // Prevenir el comportamiento predeterminado del botón  \r\n\r\n        // validar inputs del paso 1 para poder avanzar \r\n        let validar;\r\n\r\n        if (currentStep == 1) {\r\n            validar = validateInputs($('#cliente_form-personal'));\r\n        }\r\n\r\n        if (currentStep == 2) {\r\n            validar = validateInputs($('#cliente_form-contacto'));\r\n        }\r\n\r\n        if (validar) {\r\n            $(\"#paso\" + currentStep).hide();\r\n            currentStep++;\r\n            $(\"#paso\" + currentStep).show();\r\n\r\n            updateActiveClass();\r\n        }\r\n\r\n    });\r\n\r\n    $(\".btn-prev\").click(function (e) {\r\n        e.preventDefault(); // Prevenir el comportamiento predeterminado del botón\r\n        $(\"#paso\" + currentStep).hide();\r\n        currentStep--;\r\n        $(\"#paso\" + currentStep).show();\r\n        updateRemoveClass();\r\n    });\r\n\r\n    $(\".btnCancel\").click(e => {\r\n        resetForm();\r\n    });\r\n\r\n    $(\"#btnGuardar\").click(e => {\r\n        let validar = validateInputs($('#cliente_form-fiscal'));\r\n\r\n        if (validar) $('#cliente_id').val() == '' ? crearCliente() : actualizarCliente();\r\n    });\r\n\r\n    updateActiveClass();\r\n    updateRemoveClass();\r\n}\r\n\r\nfunction inicializarPagina() {\r\n\r\n    let columnDefs = [\r\n        {\r\n            headerName: 'id',\r\n            field: 'cliente_id',\r\n            width: 80\r\n        },\r\n        {\r\n            headerName: 'Nombre',\r\n            field: 'nombre',\r\n            width: 180\r\n        },\r\n        {\r\n            headerName: 'Email',\r\n            field: 'email',\r\n            width: 150\r\n        },\r\n        {\r\n            headerName: 'Télefono',\r\n            field: 'telefono',\r\n            width: 150\r\n        },\r\n        {\r\n            headerName: 'Rfc',\r\n            field: 'rfc',\r\n            width: 130\r\n        },\r\n        {\r\n            headerName: 'Ciudad',\r\n            field: 'ciudad',\r\n            width: 120\r\n        },\r\n        {\r\n            headerName: 'Tarifa',\r\n            field: 'tipo_nombre',\r\n            width: 120\r\n        },\r\n        {\r\n            headerName: 'Estatus',\r\n            field: 'estatus',\r\n            width: 100\r\n        },\r\n        {\r\n            headerName: 'Acción',\r\n            cellRenderer: function (params) {\r\n                const editButton = document.createElement('I');\r\n                editButton.className = \"fa-regular fa-pen-to-square btn btn-editar\";\r\n                editButton.title = 'Editar';\r\n\r\n                // Datos a Editar\r\n                editButton.addEventListener('click', async function () {\r\n                    await mostrarContenedorAltas();\r\n\r\n                    $('#cliente_id').val(params.data.cliente_id);\r\n                    $('#nombre').val(params.data.nombre);\r\n                    $('#apellido').val(params.data.apellido);\r\n                    $('#sexo').val(params.data.sexo);\r\n                    $('#fecha_nacimiento').val(params.data.fecha_nacimiento);\r\n                    $('#estatus').val(params.data.estatus);\r\n                    $('#email').val(params.data.email);\r\n                    $('#telefono').val(params.data.telefono);\r\n                    $('#pais').val(params.data.pais);\r\n                    $('#ciudad').val(params.data.ciudad);\r\n                    $('#codigo_postal').val(params.data.codigo_postal);\r\n                    $('#estado').val(params.data.estado);\r\n                    $('#colonia').val(params.data.colonia);\r\n                    $('#calle').val(params.data.calle);\r\n                    $('#num_ext').val(params.data.num_ext);\r\n                    $('#num_int').val(params.data.num_int);\r\n                    $('#rfc').val(params.data.rfc);\r\n                    $('#curp').val(params.data.curp);\r\n                    $('#regimen_fiscal').val(params.data.regimen_fiscal);\r\n                    $('#razon_social').val(params.data.razon_social);\r\n\r\n                    $('#preferencia_id option').val(params.data.tarifa_id);\r\n                    $('#preferencia_id option').text(params.data.tipo_nombre);\r\n \r\n                });\r\n\r\n                const actionContainer = document.createElement('div');\r\n                actionContainer.classList = \"btn-cont centrado\";\r\n                actionContainer.appendChild(editButton);\r\n\r\n                return actionContainer;\r\n            },\r\n            width: 150,\r\n            headerClass: 'txt-center',\r\n            cellClass: 'custom-action-cell', // Agregar la clase CSS 'custom-action-cell' a todas las celdas en esta columna\r\n            filter: false\r\n        }\r\n    ];\r\n\r\n    let data = '';\r\n    iniciarTabla(data, columnDefs, '#myGrid');\r\n    traeClientes();\r\n}\r\n\r\n// FUNCIONES\r\nfunction resetForm() {\r\n    cerrarVentana('.contenedor-altas', ['#cliente_form-personal', '#cliente_form-contacto', '#cliente_form-fiscal']);\r\n    $(\".altas_pasos p\").removeClass(\"pasoActivo circle-check\");\r\n    $(\"#paso1\").show();\r\n    $(\"#paso2\").hide();\r\n    $(\"#paso3\").hide();\r\n    $(\".paso1 p\").addClass(\"pasoActivo\");\r\n    currentStep = 1;\r\n    updateRemoveClass();\r\n    updateActiveClass();\r\n}\r\nasync function mostrarContenedorAltas() {\r\n    $(\".contenedor-altas\").show();\r\n    await obtenerEmpresas();\r\n}\r\nfunction updateActiveClass() {\r\n    $(\".empleado_pasos p\").removeClass(\"pasoActivo\");\r\n\r\n    if (currentStep === 1) {\r\n        $(\".paso1 p\").addClass(\"pasoActivo\");\r\n        $(\".btn-guardar\").addClass(\"hidden\");\r\n        $(\".btn-next\").removeClass(\"hidden\");\r\n    } else if (currentStep === 2) {\r\n        $(\".paso2 p\").addClass(\"pasoActivo\");\r\n        $(\".paso1 p\").addClass(\"circle-check\");\r\n        $(\".btn-prev\").removeClass(\"invisible\");\r\n    } else if (currentStep === 3) {\r\n        $(\".paso3 p\").addClass(\"pasoActivo\");\r\n        $(\".paso2 p\").addClass(\"circle-check\");\r\n        $(\".btn-next\").addClass(\"hidden\");\r\n        $(\".btn-guardar\").removeClass(\"hidden\");\r\n    }\r\n}\r\nfunction updateRemoveClass() {\r\n\r\n    $(\".empleado_pasos p\").removeClass(\"circle-check\");\r\n\r\n    if (currentStep === 1) {\r\n        $(\".paso1 p\").addClass(\"pasoActivo\");\r\n        $(\".paso2 p\").removeClass(\"pasoActivo\");\r\n        $(\".btn-prev\").addClass(\"invisible\");\r\n    } else if (currentStep === 2) {\r\n        $(\".paso1 p\").addClass(\"circle-check\");\r\n        $(\".paso2 p\").addClass(\"pasoActivo\");\r\n        $(\".paso3 p\").removeClass(\"pasoActivo\");\r\n        $(\".btn-next\").removeClass(\"hidden\");\r\n        $(\".btn-guardar\").addClass(\"hidden\");\r\n    }\r\n}\r\nasync function traeClientes() {\r\n    try {\r\n        const respuesta = await fetch('allClientes', {\r\n            method: 'GET',\r\n        });\r\n        const data = await respuesta.json();\r\n        // console.log(data);\r\n\r\n        let convert = verificarArray(data);\r\n        gridApi.setGridOption('rowData', convert);\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        SwalToast('warning', 'Error al obtener los usuarios', 2500);\r\n    }\r\n}\r\nasync function obtenerEmpresas() {\r\n    try {\r\n        const respuesta = await fetch('brokers/activas', {\r\n            method: 'GET'\r\n        });\r\n        const data = await respuesta.json();\r\n        // console.log(data);\r\n\r\n        if (!data.length > 0) SwalToast('warning', 'No hay Programas disponibles.', 2500);\r\n\r\n        return data;\r\n    } catch (error) {\r\n        console.error(error);\r\n        SwalLoad('error', 'Ocurrio Un Error', 'Conección Perdida a BD.', false);\r\n    }\r\n}\r\nasync function obtenerPreferencia() {\r\n    try {\r\n        const respuesta = await fetch('tarifa/tipo', {\r\n            method: 'GET'\r\n        });\r\n        const data = await respuesta.json();\r\n\r\n        if (!data.length > 0) SwalToast('warning', 'No hay Tarifas disponibles.', 2500);\r\n\r\n        return data;\r\n    } catch (error) {\r\n        console.error(error);\r\n        SwalLoad('error', 'Ocurrio Un Error', 'Conección Perdida a BD.', false);\r\n    }\r\n}\r\nasync function crearCliente() {\r\n\r\n    const nombre = $('#nombre').val();\r\n    const apellido = $('#apellido').val();\r\n    const sexo = $('#sexo').val();\r\n    const fecha_nacimiento = $('#fecha_nacimiento').val();\r\n    const estatus = $('#estatus').val();\r\n    const preferencia_id = $('#preferencia_id').val();\r\n    const email = $('#email').val();\r\n    const telefono = $('#telefono').val();\r\n    const pais = $('#pais').val();\r\n    const ciudad = $('#ciudad').val();\r\n    const codigo_postal = $('#codigo_postal').val();\r\n    const estado = $('#estado').val();\r\n    const colonia = $('#colonia').val();\r\n    const calle = $('#calle').val();\r\n    const num_ext = $('#num_ext').val();\r\n    const num_int = $('#num_int').val();\r\n    const rfc = $('#rfc').val();\r\n    const curp = $('#curp').val();\r\n    const regimen_fiscal = $('#regimen_fiscal').val();\r\n    const razon_social = $('#razon_social').val();\r\n \r\n    try {\r\n\r\n        const datos = new FormData();\r\n        datos.append('nombre', nombre);\r\n        datos.append('apellido', apellido);\r\n        datos.append('sexo', sexo);\r\n        datos.append('fecha_nacimiento', fecha_nacimiento);\r\n        datos.append('estatus', estatus);\r\n        datos.append('tarifa_id', preferencia_id);\r\n        datos.append('email', email);\r\n        datos.append('telefono', telefono);\r\n        datos.append('pais', pais);\r\n        datos.append('ciudad', ciudad);\r\n        datos.append('codigo_postal', codigo_postal);\r\n        datos.append('estado', estado);\r\n        datos.append('colonia', colonia);\r\n        datos.append('calle', calle);\r\n        datos.append('num_ext', num_ext);\r\n        datos.append('num_int', num_int);\r\n        datos.append('rfc', rfc);\r\n        datos.append('curp', curp);\r\n        datos.append('regimen_fiscal', regimen_fiscal);\r\n        datos.append('razon_social', razon_social);\r\n \r\n        const respuesta = await fetch('crear/cliente', {\r\n            method: 'POST',\r\n            body: datos\r\n        });\r\n\r\n        const data = await respuesta.json();\r\n        // console.log(data);\r\n\r\n        if (data.exito == 1) {\r\n            // Registro Creado Exitosamente\r\n            SwalLoad('success', 'Éxito', 'Registro Creado Correctamente', false);\r\n            setTimeout(() => {\r\n                swal.close();\r\n                resetForm();\r\n                traeClientes();\r\n            }, 1500);\r\n        } else if (data.exito == 0) {\r\n            SwalLoad('error', 'Error en la Transacción', data.errorSMS, true);\r\n        }\r\n        if (data.alertas) {\r\n            SwalToast('warning', data.alertas.error, 2500);\r\n        }\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        SwalLoad('error', 'Error en la Conexión', 'Comunicate con el Administrador', false);\r\n    }\r\n}\r\nasync function actualizarCliente() {\r\n\r\n    const cliente_id = $('#cliente_id').val();\r\n    const nombre = $('#nombre').val();\r\n    const apellido = $('#apellido').val();\r\n    const sexo = $('#sexo').val();\r\n    const fecha_nacimiento = $('#fecha_nacimiento').val();\r\n    const estatus = $('#estatus').val();\r\n    const preferencia_id = $('#preferencia_id').val();\r\n    const email = $('#email').val();\r\n    const telefono = $('#telefono').val();\r\n    const pais = $('#pais').val();\r\n    const ciudad = $('#ciudad').val();\r\n    const codigo_postal = $('#codigo_postal').val();\r\n    const estado = $('#estado').val();\r\n    const colonia = $('#colonia').val();\r\n    const calle = $('#calle').val();\r\n    const num_ext = $('#num_ext').val();\r\n    const num_int = $('#num_int').val();\r\n    const rfc = $('#rfc').val();\r\n    const curp = $('#curp').val();\r\n    const regimen_fiscal = $('#regimen_fiscal').val();\r\n    const razon_social = $('#razon_social').val();\r\n \r\n    try {\r\n\r\n        const datos = new FormData();\r\n        datos.append('cliente_id', cliente_id);\r\n        datos.append('nombre', nombre);\r\n        datos.append('apellido', apellido);\r\n        datos.append('sexo', sexo);\r\n        datos.append('fecha_nacimiento', fecha_nacimiento);\r\n        datos.append('estatus', estatus);\r\n        datos.append('tarifa_id', preferencia_id);\r\n        datos.append('email', email);\r\n        datos.append('telefono', telefono);\r\n        datos.append('pais', pais);\r\n        datos.append('ciudad', ciudad);\r\n        datos.append('codigo_postal', codigo_postal);\r\n        datos.append('estado', estado);\r\n        datos.append('colonia', colonia);\r\n        datos.append('calle', calle);\r\n        datos.append('num_ext', num_ext);\r\n        datos.append('num_int', num_int);\r\n        datos.append('rfc', rfc);\r\n        datos.append('curp', curp);\r\n        datos.append('regimen_fiscal', regimen_fiscal);\r\n        datos.append('razon_social', razon_social);\r\n \r\n        const respuesta = await fetch('actualizar/cliente', {\r\n            method: 'POST',\r\n            body: datos\r\n        });\r\n        const data = await respuesta.json();\r\n\r\n        if (data.exito == 1) {\r\n            // Registro Creado Exitosamente\r\n            SwalLoad('success', 'Éxito', 'Registro Actualizado Correctamente', false);\r\n            setTimeout(() => {\r\n                swal.close();\r\n                resetForm();\r\n                traeClientes();\r\n            }, 1500);\r\n        } else if (data.exito == 0) {\r\n            SwalLoad('error', 'Error en la Transacción', data.errorSMS, true);\r\n        }\r\n\r\n        if (data.alertas) {\r\n            SwalToast('warning', data.alertas.error, 2500);\r\n        }\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        SwalLoad('error', 'Error en la Conexión', 'Comunicate con el Administrador', false);\r\n    }\r\n}"]}