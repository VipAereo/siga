{"version":3,"sources":["brokers.js"],"names":["gridOptions","currentStep","asignarEventos","$","hide","document","addEventListener","e","key","resetearFormularioBrokers","getElementById","async","event","preventDefault","show","focus","data","obtenerPreferencia","mostrarListaSearch","configurarBotones","click","mostrarContenedorAltas","validar","validateInputs","updateActiveClass","updateRemoveClass","val","crearBroker","actualizarBroker","on","toggleClass","this","checked","inicializarPagina","iniciarTabla","headerName","field","width","cellRenderer","params","editButton","createElement","className","title","broker_id","nombre","siglas_empresa","telefono","email","sitio_web","contacto_principal","calle","num_ext","num_int","ciudad","estado","municipio","codigo_postal","colonia","pais","rfc","razon_social","regimen_fiscal","giro_comercial","estatus","ischecked","prop","removeClass","descuento","tarifa_id","text","tipo_nombre","actionContainer","classList","appendChild","headerClass","cellClass","filter","traerBrokers","aplicarMascaraCantidad","respuesta","fetch","method","json","convert","verificarArray","gridApi","setGridOption","error","console","SwalToast","length","SwalLoad","addClass","cerrarVentana","comision","sinComa","preferencia_id","datos","FormData","append","body","exito","setTimeout","swal","close","errorSMS","alertas"],"mappings":"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","file":"brokers.js","sourcesContent":["let gridOptions;\r\nlet currentStep = 1;\r\n\r\n// Utilizando el Principio de Modularidad\r\n$(function () {\r\n    asignarEventos();\r\n    inicializarPagina();\r\n    configurarBotones();\r\n});\r\n\r\nfunction asignarEventos() {\r\n\r\n    $('.prefSearch').hide();\r\n\r\n    document.addEventListener(\"keydown\", e => {\r\n        if (e.key === 'Escape') {\r\n            resetearFormularioBrokers();\r\n        }\r\n    });\r\n\r\n    // Lista Preferencia\r\n    document.getElementById(\"preferencia_id\").addEventListener(\"mousedown\", async function (event) {\r\n        event.preventDefault();\r\n        $('.prefSearch').show();\r\n        $('.inPrefSrch').focus();\r\n        let data = await obtenerPreferencia();\r\n        const listSearch = await mostrarListaSearch(data, '.prefSearch', 'tipo_id', 'nombre');\r\n    });\r\n}\r\n\r\nfunction configurarBotones() {\r\n\r\n    $(\".contenedor-altas\").hide();\r\n    $(\"#crear-broker\").click(mostrarContenedorAltas);\r\n\r\n    $(\".btn-next\").click(function (e) {\r\n        e.preventDefault(); // Prevenir el comportamiento predeterminado del botón  \r\n\r\n        // validar inputs del paso 1 para poder avanzar \r\n        let validar;\r\n\r\n        if (currentStep == 1) {\r\n            validar = validateInputs($('#broker_formulario-broker'));\r\n        }\r\n\r\n        if (currentStep == 2) {\r\n            validar = validateInputs($('#broker_formulario-contacto'));\r\n        }\r\n\r\n        if (validar) {\r\n            $(\"#paso\" + currentStep).hide();\r\n            currentStep++;\r\n            $(\"#paso\" + currentStep).show();\r\n\r\n            updateActiveClass();\r\n        }\r\n\r\n    });\r\n\r\n    $(\".btnCancel\").click(e => {\r\n        currentStep = 1;\r\n        resetearFormularioBrokers();\r\n    });\r\n\r\n    $(\".btn-prev\").click(function (e) {\r\n        e.preventDefault(); // Prevenir el comportamiento predeterminado del botón\r\n        $(\"#paso\" + currentStep).hide();\r\n        currentStep--;\r\n        $(\"#paso\" + currentStep).show();\r\n        updateRemoveClass();\r\n    });\r\n\r\n    $(\"#btnGuardar\").click(e => {\r\n        // let validar = validateInputs($('#altas-secciones'));\r\n        let validar = validateInputs($('#broker_formulario-broker'));\r\n\r\n        if (validar) {\r\n            $('#broker_id').val() == '' ? crearBroker() : actualizarBroker();\r\n        }\r\n    });\r\n\r\n    $('#comision').on(\"change\", function () {\r\n        $('.input-empr-desc').toggleClass(\"hidden\", !this.checked);\r\n        $('#descuento').val('');\r\n    });\r\n\r\n    updateActiveClass();\r\n    updateRemoveClass();\r\n}\r\n\r\n// FUNCIONES\r\nfunction inicializarPagina() {\r\n\r\n    let columnDefs = [\r\n        {\r\n            headerName: 'id',\r\n            field: 'broker_id',\r\n            width: 60\r\n        },\r\n        {\r\n            headerName: 'Siglas',\r\n            field: 'siglas_empresa',\r\n            width: 100\r\n        },\r\n        {\r\n            headerName: 'Nombre',\r\n            field: 'nombre',\r\n            width: 150\r\n        },\r\n        {\r\n            headerName: 'Teléfono',\r\n            field: 'telefono',\r\n            width: 120\r\n        },\r\n        {\r\n            headerName: 'Email',\r\n            field: 'email',\r\n            width: 120\r\n        },\r\n        {\r\n            headerName: 'Contacto',\r\n            field: 'contacto_principal',\r\n            width: 150\r\n        },\r\n        {\r\n            headerName: 'Razón Social',\r\n            field: 'razon_social',\r\n            width: 120\r\n        },\r\n        {\r\n            headerName: 'Dirección',\r\n            field: 'calle',\r\n            width: 120\r\n        },\r\n        {\r\n            headerName: 'Estatus',\r\n            field: 'estatus',\r\n            width: 100\r\n        },\r\n        {\r\n            headerName: 'Acción',\r\n            cellRenderer: function (params) {\r\n                const editButton = document.createElement('I');\r\n                editButton.className = \"fa-regular fa-pen-to-square btn btn-editar\";\r\n                editButton.title = 'Editar';\r\n\r\n                // Datos a Editar\r\n                editButton.addEventListener('click', async function () {\r\n                    await mostrarContenedorAltas();\r\n                    $('#broker_id').val(params.data.broker_id);\r\n                    $('#nombre').val(params.data.nombre);\r\n                    $('#siglas_empresa').val(params.data.siglas_empresa);\r\n                    $('#telefono').val(params.data.telefono);\r\n                    $('#email').val(params.data.email);\r\n                    $('#sitio_web').val(params.data.sitio_web);\r\n                    $('#contacto_principal').val(params.data.contacto_principal);\r\n                    $('#calle').val(params.data.calle);\r\n                    $('#num_ext').val(params.data.num_ext);\r\n                    $('#num_int').val(params.data.num_int);\r\n                    $('#ciudad').val(params.data.ciudad);\r\n                    $('#estado').val(params.data.estado);\r\n                    $('#municipio').val(params.data.municipio);\r\n                    $('#codigo_postal').val(params.data.codigo_postal);\r\n                    $('#colonia').val(params.data.colonia);\r\n                    $('#pais').val(params.data.pais);\r\n                    $('#rfc').val(params.data.rfc);\r\n                    $('#razon_social').val(params.data.razon_social);\r\n                    $('#regimen_fiscal').val(params.data.regimen_fiscal);\r\n                    $('#giro_comercial').val(params.data.giro_comercial);\r\n                    $('#estatus').val(params.data.estatus);\r\n                    if (params.data.ischecked == 1) {\r\n                        $('#comision').prop('checked', true);\r\n                        $('.input-empr-desc').removeClass(\"hidden\");\r\n                    } else {\r\n                        $('#comision').prop('checked', false);\r\n                    }\r\n                    $('#descuento').val(params.data.descuento);\r\n\r\n                    $('#preferencia_id option').val(params.data.tarifa_id);\r\n                    $('#preferencia_id option').text(params.data.tipo_nombre);\r\n \r\n                });\r\n\r\n                const actionContainer = document.createElement('div');\r\n                actionContainer.classList = \"btn-cont centrado\";\r\n                actionContainer.appendChild(editButton);\r\n\r\n                return actionContainer;\r\n            },\r\n            width: 150,\r\n            headerClass: 'txt-center',\r\n            cellClass: 'custom-action-cell', // Agregar la clase CSS 'custom-action-cell' a todas las celdas en esta columna\r\n            filter: false\r\n        }\r\n    ];\r\n\r\n    let data = '';\r\n    iniciarTabla(data, columnDefs, '#myGrid');\r\n    traerBrokers();\r\n}\r\nasync function mostrarContenedorAltas() {\r\n    $(\".contenedor-altas\").show();\r\n    aplicarMascaraCantidad('descuento');\r\n}\r\nasync function traerBrokers() {\r\n    try {\r\n        const respuesta = await fetch('obtener/brokers', {\r\n            method: 'GET',\r\n        });\r\n        const data = await respuesta.json();\r\n        // console.log(data);\r\n\r\n        let convert = verificarArray(data);\r\n        gridApi.setGridOption('rowData', convert);\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        SwalToast('warning', 'Error al obtener los usuarios', 2500);\r\n    }\r\n}\r\nasync function obtenerPreferencia() {\r\n    try {\r\n        const respuesta = await fetch('tarifa/tipo', {\r\n            method: 'GET'\r\n        });\r\n        const data = await respuesta.json();\r\n\r\n        if (!data.length > 0) SwalToast('warning', 'No hay Tarifas disponibles.', 2500);\r\n\r\n        return data;\r\n    } catch (error) {\r\n        console.error(error);\r\n        SwalLoad('error', 'Ocurrio Un Error', 'Conección Perdida a BD.', false);\r\n    }\r\n}\r\nfunction updateActiveClass() {\r\n    $(\".empleado_pasos p\").removeClass(\"pasoActivo\");\r\n\r\n    if (currentStep === 1) {\r\n        $(\".paso1 p\").addClass(\"pasoActivo\");\r\n        $(\".btn-guardar\").addClass(\"hidden\");\r\n        $(\".btn-next\").removeClass(\"hidden\");\r\n    } else if (currentStep === 2) {\r\n        $(\".paso2 p\").addClass(\"pasoActivo\");\r\n        $(\".paso1 p\").addClass(\"circle-check\");\r\n        $(\".btn-prev\").removeClass(\"invisible\");\r\n    } else if (currentStep === 3) {\r\n        $(\".paso3 p\").addClass(\"pasoActivo\");\r\n        $(\".paso2 p\").addClass(\"circle-check\");\r\n        $(\".btn-next\").addClass(\"hidden\");\r\n        $(\".btn-guardar\").removeClass(\"hidden\");\r\n    }\r\n}\r\nfunction updateRemoveClass() {\r\n\r\n    $(\".empleado_pasos p\").removeClass(\"circle-check\");\r\n\r\n    if (currentStep === 1) {\r\n        $(\".paso1 p\").addClass(\"pasoActivo\");\r\n        $(\".paso2 p\").removeClass(\"pasoActivo\");\r\n        $(\".btn-prev\").addClass(\"invisible\");\r\n    } else if (currentStep === 2) {\r\n        $(\".paso1 p\").addClass(\"circle-check\");\r\n        $(\".paso2 p\").addClass(\"pasoActivo\");\r\n        $(\".paso3 p\").removeClass(\"pasoActivo\");\r\n        $(\".btn-next\").removeClass(\"hidden\");\r\n        $(\".btn-guardar\").addClass(\"hidden\");\r\n    }\r\n}\r\nfunction resetearFormularioBrokers() {\r\n    cerrarVentana('.contenedor-altas', ['#broker_formulario-broker', '#broker_formulario-contacto', '#broker_formulario-fiscal']);\r\n    $(\".altas_pasos p\").removeClass(\"pasoActivo circle-check\");\r\n    $(\"#paso1\").show();\r\n    $(\"#paso2\").hide();\r\n    $(\"#paso3\").hide();\r\n    $(\".paso1 p\").addClass(\"pasoActivo\");\r\n    $('.input-empr-desc').addClass(\"hidden\");\r\n    currentStep = 1;\r\n    updateRemoveClass();\r\n    updateActiveClass();\r\n}\r\nasync function crearBroker() {\r\n\r\n    const nombre = $('#nombre').val();\r\n    const siglas_empresa = $('#siglas_empresa').val();\r\n    const telefono = $('#telefono').val();\r\n    const email = $('#email').val();\r\n    const sitio_web = $('#sitio_web').val();\r\n    const contacto_principal = $('#contacto_principal').val();\r\n    const calle = $('#calle').val();\r\n    const num_ext = $('#num_ext').val();\r\n    const num_int = $('#num_int').val();\r\n    const ciudad = $('#ciudad').val();\r\n    const estado = $('#estado').val();\r\n    const municipio = $('#municipio').val();\r\n    const codigo_postal = $('#codigo_postal').val();\r\n    const colonia = $('#colonia').val();\r\n    const pais = $('#pais').val();\r\n    const rfc = $('#rfc').val();\r\n    const razon_social = $('#razon_social').val();\r\n    const regimen_fiscal = $('#regimen_fiscal').val();\r\n    const giro_comercial = $('#giro_comercial').val();\r\n    const estatus = $('#estatus').val();\r\n    let comision = $('#comision').prop('checked') ? 1 : 0;\r\n    const descuento = sinComa($('#descuento').val());\r\n    const preferencia_id = $('#preferencia_id').val();\r\n    \r\n\r\n    try {\r\n        const datos = new FormData();\r\n        datos.append('nombre', nombre);\r\n        datos.append('siglas_empresa', siglas_empresa);\r\n        datos.append('telefono', telefono);\r\n        datos.append('email', email);\r\n        datos.append('sitio_web', sitio_web);\r\n        datos.append('contacto_principal', contacto_principal);\r\n        datos.append('calle', calle);\r\n        datos.append('num_ext', num_ext);\r\n        datos.append('num_int', num_int);\r\n        datos.append('ciudad', ciudad);\r\n        datos.append('estado', estado);\r\n        datos.append('municipio', municipio);\r\n        datos.append('codigo_postal', codigo_postal);\r\n        datos.append('colonia', colonia);\r\n        datos.append('pais', pais);\r\n        datos.append('rfc', rfc);\r\n        datos.append('razon_social', razon_social);\r\n        datos.append('regimen_fiscal', regimen_fiscal);\r\n        datos.append('giro_comercial', giro_comercial);\r\n        datos.append('estatus', estatus);\r\n        datos.append('ischecked', comision);\r\n        datos.append('descuento', descuento);\r\n        datos.append('tarifa_id', preferencia_id);\r\n\r\n        const respuesta = await fetch('crear/broker', {\r\n            method: 'POST',\r\n            body: datos\r\n        });\r\n\r\n        const data = await respuesta.json();\r\n        // console.log(data);\r\n\r\n        if (data.exito == 1) {\r\n            // Registro Creado Exitosamente\r\n            SwalLoad('success', 'Éxito', 'Registro Creado Correctamente', false);\r\n            setTimeout(() => {\r\n                swal.close();\r\n                resetearFormularioBrokers();\r\n                traerBrokers();\r\n            }, 1500);\r\n        } else if (data.exito == 0) {\r\n            SwalLoad('error', 'Error en la Transacción', data.errorSMS, true);\r\n        }\r\n        if (data.alertas) {\r\n            SwalToast('warning', data.alertas.error, 2500);\r\n        }\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        SwalLoad('error', 'Error en la Conexión', 'Comunicate con el Administrador', false);\r\n    }\r\n\r\n}\r\nasync function actualizarBroker() {\r\n\r\n    const broker_id = $('#broker_id').val();\r\n    const nombre = $('#nombre').val();\r\n    const siglas_empresa = $('#siglas_empresa').val();\r\n    const telefono = $('#telefono').val();\r\n    const email = $('#email').val();\r\n    const sitio_web = $('#sitio_web').val();\r\n    const contacto_principal = $('#contacto_principal').val();\r\n    const calle = $('#calle').val();\r\n    const num_ext = $('#num_ext').val();\r\n    const num_int = $('#num_int').val();\r\n    const ciudad = $('#ciudad').val();\r\n    const estado = $('#estado').val();\r\n    const municipio = $('#municipio').val();\r\n    const codigo_postal = $('#codigo_postal').val();\r\n    const colonia = $('#colonia').val();\r\n    const pais = $('#pais').val();\r\n    const rfc = $('#rfc').val();\r\n    const razon_social = $('#razon_social').val();\r\n    const regimen_fiscal = $('#regimen_fiscal').val();\r\n    const giro_comercial = $('#giro_comercial').val();\r\n    const estatus = $('#estatus').val();\r\n    let comision = $('#comision').prop('checked') ? 1 : 0;\r\n    const descuento = sinComa($('#descuento').val());\r\n    const preferencia_id = $('#preferencia_id').val();\r\n\r\n    try {\r\n\r\n        const datos = new FormData();\r\n        datos.append('broker_id', broker_id);\r\n        datos.append('nombre', nombre);\r\n        datos.append('siglas_empresa', siglas_empresa);\r\n        datos.append('telefono', telefono);\r\n        datos.append('email', email);\r\n        datos.append('sitio_web', sitio_web);\r\n        datos.append('contacto_principal', contacto_principal);\r\n        datos.append('calle', calle);\r\n        datos.append('num_ext', num_ext);\r\n        datos.append('num_int', num_int);\r\n        datos.append('ciudad', ciudad);\r\n        datos.append('estado', estado);\r\n        datos.append('municipio', municipio);\r\n        datos.append('codigo_postal', codigo_postal);\r\n        datos.append('colonia', colonia);\r\n        datos.append('pais', pais);\r\n        datos.append('rfc', rfc);\r\n        datos.append('razon_social', razon_social);\r\n        datos.append('regimen_fiscal', regimen_fiscal);\r\n        datos.append('giro_comercial', giro_comercial);\r\n        datos.append('estatus', estatus);\r\n        datos.append('ischecked', comision);\r\n        datos.append('descuento', descuento);\r\n        datos.append('tarifa_id', preferencia_id);\r\n        \r\n        const respuesta = await fetch('actualizar/broker', {\r\n            method: 'POST',\r\n            body: datos\r\n        });\r\n        const data = await respuesta.json();\r\n\r\n        if (data.exito == 1) {\r\n            // Registro Creado Exitosamente\r\n            SwalLoad('success', 'Éxito', 'Registro Actualizado Correctamente', false);\r\n            setTimeout(() => {\r\n                swal.close();\r\n                resetearFormularioBrokers();\r\n                traerBrokers();\r\n            }, 1500);\r\n        } else if (data.exito == 0) {\r\n            SwalLoad('error', 'Error en la Transacción', data.errorSMS, true);\r\n        }\r\n\r\n        if (data.alertas) {\r\n            SwalToast('warning', data.alertas.error, 2500);\r\n        }\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        SwalLoad('error', 'Error en la Conexión', 'Comunicate con el Administrador', false);\r\n    }\r\n}"]}