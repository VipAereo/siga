let gridOptions;function asignarEventos(){$(".contenedor-altas").hide(),document.addEventListener("keydown",a=>{"Escape"===a.key&&resetForm()})}function configurarBotones(){$("#crear-pax").click(mostrarContenedorAltas),$(".btn-cancelar").click(a=>{resetForm()}),$("#btnGuardar").click(a=>{validateInputs($("#formAltas"))&&(""==$("#pasajero_id").val()?crearPax():actualizarPax())})}async function inicializarPagina(){let a=[{headerName:"id",field:"pasajero_id",width:80},{headerName:"Nombre",field:"nombre",width:250},{headerName:"Nacionalidad",field:"nacionalidad",width:150,cellRenderer:function(a){return"N"===a.value?"Nacional":"I"===a.value?"Internacional":a.value}},{headerName:"Acción",width:155,headerClass:"txt-center",cellClass:"custom-action-cell",filter:!1,cellRenderer:function(a){const e=document.createElement("I");e.className="fa-regular fa-pen-to-square btn btn-editar",e.title="Editar",e.addEventListener("click",(async function(){await mostrarContenedorAltas(),$("#pasajero_id").val(a.data.pasajero_id),$("#nombre").val(a.data.nombre),$("#nacionalidad").val(a.data.nacionalidad);const e=await obtenerDocsbyPax(a.data.pasajero_id),r=document.getElementById("contenedor-docs");if(e.length>0){crearElementoDocumento(e,r)}}));const r=document.createElement("div");return r.classList="btn-cont centrado",r.appendChild(e),r}}];await iniciarTabla("",a,"#myGrid"),traerPasajeros()}async function mostrarContenedorAltas(){$(".contenedor-altas").show()}function resetForm(){$("#contenedor-docs").empty(),cerrarVentana(".contenedor-altas",["#formAltas"])}function crearElementoDocumento(a,e){a.forEach(a=>{const r=document.createElement("a");r.classList.add("thumbnail"),r.href=`/${a.ruta}/${a.hash_doc}.${a.tipo_doc}`,r.setAttribute("target","_blank");const n=document.createElement("DIV");n.classList.add("fileicon");const o=document.createElement("I");o.classList.add("fa-regular","fa-file");const t=document.createElement("DIV");t.classList.add("filename");const c=document.createElement("P");c.textContent=""+a.nombre_doc,n.appendChild(o),t.appendChild(c),r.appendChild(n),r.appendChild(t),e.appendChild(r)})}async function traerPasajeros(){try{const a=await fetch("obtener/pasajeros",{method:"GET"}),e=await a.json();let r=verificarArray(e);gridApi.setGridOption("rowData",r)}catch(a){console.error(a),SwalToast("warning","Error al obtener los datos",2500)}}async function obtenerDocsbyPax(a){try{const e=new FormData;e.append("pasajero_id",a);const r=await fetch("obtener/pasajerosDocs",{method:"POST",body:e});return await r.json()}catch(a){console.error(a),SwalLoad("error","Error en la Conexión","Comunicate con el Administrador",!1)}}async function crearPax(){try{const a=$("#nombre").val(),e=$("#nacionalidad").val(),r=$("#docPax")[0].files[0],n=new FormData;n.append("nombre",a),n.append("nacionalidad",e),n.append("archivo",r);const o=await fetch("crear/pax",{method:"POST",body:n}),t=await o.json();1==t.exito?(SwalLoad("success","Éxito","Registro Creado Correctamente",!1),setTimeout(()=>{swal.close(),resetForm(),traerPasajeros()},1500)):0==t.exito&&SwalLoad("error","Error en la Transacción",t.errorSMS,!0),t.alertas&&SwalToast("warning",t.alertas.error,2500)}catch(a){console.error(a),SwalLoad("error","Error en la Conexión","Comunicate con el Administrador",!1)}}async function actualizarPax(){try{const a=$("#pasajero_id").val(),e=$("#nombre").val(),r=$("#nacionalidad").val(),n=$("#docPax")[0].files[0],o=new FormData;o.append("pasajero_id",a),o.append("nombre",e),o.append("nacionalidad",r),o.append("archivo",n);const t=await fetch("actualizar/pax",{method:"POST",body:o}),c=await t.json();1==c.exito?(SwalLoad("success","Éxito","Registro Actualizado Correctamente",!1),setTimeout(()=>{swal.close(),resetForm(),traerPasajeros()},1500)):0==c.exito&&SwalLoad("error","Error en la Transacción",c.errorSMS,!0),c.alertas&&SwalToast("warning",c.alertas.error,2500)}catch(a){console.error(a),SwalLoad("error","Error en la Conexión","Comunicate con el Administrador",!1)}}$((function(){asignarEventos(),inicializarPagina(),configurarBotones()}));
//# sourceMappingURL=pasajero.js.map
