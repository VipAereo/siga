{"version":3,"sources":["aeropuerto.js"],"names":["gridOptions","asignarEventos","aplicarMascaraCantidad","document","addEventListener","e","key","resetForm","configurarBotones","$","hide","click","mostrarContenedorAltas","validateInputs","val","crearAeropuerto","actualizarAeropuerto","inicializarPagina","iniciarTabla","headerName","field","width","valueFormatter","params","Number","value","toFixed","replace","cellRenderer","editButton","createElement","className","title","async","data","aeropuerto_id","nombre","codigo_iata","codigo_icao","costo_tua","pais","estado","municipio","concesionario","permisionario","longitud","latitud","altitud","estatus","actionContainer","classList","appendChild","headerClass","cellClass","filter","traeAeropuerto","cerrarVentana","show","respuesta","fetch","method","json","console","log","convert","verificarArray","gridApi","setGridOption","error","SwalToast","datos","FormData","append","body","exito","SwalLoad","setTimeout","swal","close","errorSMS","alertas","sinComa"],"mappings":"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","file":"aeropuerto.js","sourcesContent":["let gridOptions;\r\n\r\n// Utilizando el Principio de Modularidad\r\n$(function () {\r\n    asignarEventos();\r\n    inicializarPagina();\r\n    configurarBotones();\r\n});\r\n\r\nfunction asignarEventos() {\r\n\r\n    aplicarMascaraCantidad('costo_tua');\r\n\r\n    document.addEventListener(\"keydown\", e => {\r\n        if (e.key === 'Escape') {\r\n            resetForm();\r\n        }\r\n    });\r\n}\r\n\r\nfunction configurarBotones() {\r\n    $(\".contenedor-altas\").hide();\r\n    $(\"#crear-aeronave\").click(mostrarContenedorAltas);\r\n\r\n    $(\".btn-cancelar\").click(e => {\r\n        resetForm();\r\n    });\r\n\r\n    $(\"#btnGuardar\").click(e => {\r\n        let validar = validateInputs($('#formAltas'));\r\n        if (validar) $('#aeropuerto_id').val() == '' ? crearAeropuerto() : actualizarAeropuerto();\r\n    });\r\n}\r\n\r\nfunction inicializarPagina() {\r\n\r\n    let columnDefs = [\r\n        {\r\n            headerName: 'id',\r\n            field: 'aeropuerto_id',\r\n            width: 80\r\n        },\r\n        {\r\n            headerName: 'Nombre',\r\n            field: 'nombre',\r\n            width: 250\r\n        },\r\n        {\r\n            headerName: 'Código IATA',\r\n            field: 'codigo_iata',\r\n            width: 120\r\n        },\r\n        {\r\n            headerName: 'Código ICAO',\r\n            field: 'codigo_icao',\r\n            width: 120\r\n        },\r\n        {\r\n            headerName: 'Costo TUA',\r\n            field: 'costo_tua',\r\n            width: 120,\r\n            valueFormatter: function (params) {\r\n                // Formatea el número con comas como separadores de miles y dos decimales\r\n                return Number(params.value).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n            }\r\n        },\r\n        {\r\n            headerName: 'País',\r\n            field: 'pais',\r\n            width: 100\r\n        },\r\n        {\r\n            headerName: 'Estado',\r\n            field: 'estado',\r\n            width: 135\r\n        },\r\n        {\r\n            headerName: 'Estatus',\r\n            field: 'estatus',\r\n            width: 100\r\n        },\r\n        {\r\n            headerName: 'Acción',\r\n            cellRenderer: function (params) {\r\n                const editButton = document.createElement('I');\r\n                editButton.className = \"fa-regular fa-pen-to-square btn btn-editar\";\r\n                editButton.title = 'Editar';\r\n\r\n                // Datos a Editar\r\n                editButton.addEventListener('click', async function () {\r\n                    await mostrarContenedorAltas();\r\n\r\n                    $('#aeropuerto_id').val(params.data.aeropuerto_id);\r\n                    $('#nombre').val(params.data.nombre);\r\n                    $('#codigo_iata').val(params.data.codigo_iata);\r\n                    $('#codigo_icao').val(params.data.codigo_icao);\r\n                    $('#costo_tua').val(params.data.costo_tua);\r\n                    $('#pais').val(params.data.pais);\r\n                    $('#estado').val(params.data.estado);\r\n                    $('#municipio').val(params.data.municipio);\r\n                    $('#concesionario').val(params.data.concesionario);\r\n                    $('#permisionario').val(params.data.permisionario);\r\n                    $('#longitud').val(params.data.longitud);\r\n                    $('#latitud').val(params.data.latitud);\r\n                    $('#altitud').val(params.data.altitud);\r\n                    $('#estatus').val(params.data.estatus);\r\n                });\r\n\r\n                const actionContainer = document.createElement('div');\r\n                actionContainer.classList = \"btn-cont centrado\";\r\n                actionContainer.appendChild(editButton);\r\n\r\n                return actionContainer;\r\n            },\r\n            width: 150,\r\n            headerClass: 'txt-center',\r\n            cellClass: 'custom-action-cell', // Agregar la clase CSS 'custom-action-cell' a todas las celdas en esta columna\r\n            filter: false\r\n        }\r\n    ];\r\n\r\n    let data = '';\r\n    iniciarTabla(data, columnDefs, '#myGrid');\r\n    traeAeropuerto();\r\n}\r\n\r\nfunction resetForm() {\r\n    cerrarVentana('.contenedor-altas', ['#formAltas']);\r\n}\r\nasync function mostrarContenedorAltas() {\r\n    $(\".contenedor-altas\").show();\r\n}\r\n\r\nasync function traeAeropuerto() {\r\n    try {\r\n        const respuesta = await fetch('allAeropuertos', {\r\n            method: 'GET',\r\n        });\r\n        const data = await respuesta.json();\r\n        console.log(data);\r\n\r\n        let convert = verificarArray (data);\r\n        gridApi.setGridOption('rowData', convert);\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        SwalToast('warning', 'Error al obtener los usuarios', 2500);\r\n    }\r\n}\r\nasync function crearAeropuerto() {\r\n\r\n    const nombre = $('#nombre').val();\r\n    const codigo_iata = $('#codigo_iata').val();\r\n    const codigo_icao = $('#codigo_icao').val();\r\n    const costo_tua = $('#costo_tua').val();\r\n    const pais = $('#pais').val();\r\n    const estado = $('#estado').val();\r\n    const municipio = $('#municipio').val();\r\n    const concesionario = $('#concesionario').val();\r\n    const permisionario = $('#permisionario').val();\r\n    const longitud = $('#longitud').val();\r\n    const latitud = $('#latitud').val();\r\n    const altitud = $('#altitud').val();\r\n    const estatus = $('#estatus').val();\r\n\r\n    try {\r\n\r\n        const datos = new FormData();\r\n        datos.append('nombre', nombre);\r\n        datos.append('codigo_iata', codigo_iata);\r\n        datos.append('codigo_icao', codigo_icao);\r\n        datos.append('costo_tua', costo_tua);\r\n        datos.append('pais', pais);\r\n        datos.append('estado', estado);\r\n        datos.append('municipio', municipio);\r\n        datos.append('concesionario', concesionario);\r\n        datos.append('permisionario', permisionario);\r\n        datos.append('longitud', longitud);\r\n        datos.append('latitud', latitud);\r\n        datos.append('altitud', altitud);\r\n        datos.append('estatus', estatus);\r\n\r\n        const respuesta = await fetch('crear/aeropuerto', {\r\n            method: 'POST',\r\n            body: datos\r\n        });\r\n\r\n        const data = await respuesta.json();\r\n        // console.log(data);\r\n\r\n        if (data.exito == 1) {\r\n            // Registro Creado Exitosamente\r\n            SwalLoad('success', 'Éxito', 'Registro Creado Correctamente', false);\r\n            setTimeout(() => {\r\n                swal.close();\r\n                resetForm();\r\n                traeAeropuerto();\r\n            }, 1500);\r\n        } else if (data.exito == 0) {\r\n            SwalLoad('error', 'Error en la Transacción', data.errorSMS, true);\r\n        }\r\n        if (data.alertas) {\r\n            SwalToast('warning', data.alertas.error, 2500);\r\n        }\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        SwalLoad('error', 'Error en la Conexión', 'Comunicate con el Administrador', false);\r\n    }\r\n\r\n}\r\nasync function actualizarAeropuerto() {\r\n\r\n    const aeropuerto_id = $('#aeropuerto_id').val();\r\n    const nombre = $('#nombre').val();\r\n    const codigo_iata = $('#codigo_iata').val();\r\n    const codigo_icao = $('#codigo_icao').val();\r\n    const costo_tua = sinComa($('#costo_tua').val());\r\n    const pais = $('#pais').val();\r\n    const estado = $('#estado').val();\r\n    const municipio = $('#municipio').val();\r\n    const concesionario = $('#concesionario').val();\r\n    const permisionario = $('#permisionario').val();\r\n    const longitud = $('#longitud').val();\r\n    const latitud = $('#latitud').val();\r\n    const altitud = $('#altitud').val();\r\n    const estatus = $('#estatus').val();\r\n\r\n    try {\r\n\r\n        const datos = new FormData();\r\n        datos.append('aeropuerto_id', aeropuerto_id);\r\n        datos.append('nombre', nombre);\r\n        datos.append('codigo_iata', codigo_iata);\r\n        datos.append('codigo_icao', codigo_icao);\r\n        datos.append('costo_tua', costo_tua);\r\n        datos.append('pais', pais);\r\n        datos.append('estado', estado);\r\n        datos.append('municipio', municipio);\r\n        datos.append('concesionario', concesionario);\r\n        datos.append('permisionario', permisionario);\r\n        datos.append('longitud', longitud);\r\n        datos.append('latitud', latitud);\r\n        datos.append('altitud', altitud);\r\n        datos.append('estatus', estatus);\r\n\r\n\r\n        const respuesta = await fetch('actualizar/aeropuerto', {\r\n            method: 'POST',\r\n            body: datos\r\n        });\r\n\r\n        const data = await respuesta.json();\r\n\r\n        if (data.exito == 1) {\r\n            // Registro Creado Exitosamente\r\n            SwalLoad('success', 'Éxito', 'Registro Actualizado Correctamente', false);\r\n            setTimeout(() => {\r\n                swal.close();\r\n                resetForm();\r\n                traeAeropuerto();\r\n            }, 1500);\r\n        } else if (data.exito == 0) {\r\n            SwalLoad('error', 'Error en la Transacción', data.errorSMS, true);\r\n        }\r\n\r\n        if (data.alertas) {\r\n            SwalToast('warning', data.alertas.error, 2500);\r\n        }\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        SwalLoad('error', 'Error en la Conexión', 'Comunicate con el Administrador', false);\r\n    }\r\n}"]}