{"version":3,"sources":["aeronaves.js"],"names":["gridOptions","asignarEventos","document","addEventListener","e","key","resetFormAeronave","aplicarMascaraKm","configurarBotones","$","hide","click","mostrarContenedorAltas","validateInputs","val","crearAeronave","actualizarAeronave","inicializarPagina","iniciarTabla","headerName","field","width","cellRenderer","params","editButton","createElement","className","title","async","data","aeronave_id","modelo","ktas","matricula","fabricante","numero_serie","anio_fabricante","asientos","ultima_revision","horas","estado_actual","fecha_retiro","actionContainer","classList","appendChild","headerClass","cellClass","filter","traerAeronaves","respuesta","fetch","method","json","convert","verificarArray","gridApi","setGridOption","error","console","SwalToast","show","cerrarVentana","datos","FormData","append","body","exito","SwalLoad","setTimeout","swal","close","errorSMS","alertas"],"mappings":"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","file":"aeronaves.js","sourcesContent":["let gridOptions;\r\n\r\n// Utilizando el Principio de Modularidad\r\n$(function () {\r\n    asignarEventos();\r\n    inicializarPagina();\r\n    configurarBotones();\r\n});\r\n\r\nfunction asignarEventos() {\r\n    document.addEventListener(\"keydown\", e => {\r\n        if (e.key === 'Escape') {\r\n            resetFormAeronave();\r\n        }\r\n    });\r\n\r\n    aplicarMascaraKm('ktas');\r\n}\r\n\r\nfunction configurarBotones() {\r\n    $(\".contenedor-altas\").hide();\r\n    $(\"#crear-aeronave\").click(mostrarContenedorAltas);\r\n\r\n    $(\".btn-cancelar\").click(e => {\r\n        resetFormAeronave();\r\n    });\r\n\r\n    $(\"#btnGuardar\").click(e => {\r\n        let validar = validateInputs($('#formAltas'));\r\n        if (validar) $('#aeronave_id').val() == '' ? crearAeronave() : actualizarAeronave();\r\n    });\r\n}\r\n\r\n// FUNCIONES\r\nfunction inicializarPagina() {\r\n\r\n    let columnDefs = [\r\n        {\r\n            headerName: 'id',\r\n            field: 'aeronave_id',\r\n            width: 80\r\n        },\r\n        {\r\n            headerName: 'Número Serie',\r\n            field: 'numero_serie',\r\n            width: 120\r\n        },\r\n        {\r\n            headerName: 'Modelo',\r\n            field: 'modelo',\r\n            width: 150\r\n        },\r\n        {\r\n            headerName: 'Fabricante',\r\n            field: 'fabricante',\r\n            width: 100\r\n        },\r\n        {\r\n            headerName: 'Matricula',\r\n            field: 'matricula',\r\n            width: 120\r\n        },\r\n        {\r\n            headerName: 'asientos',\r\n            field: 'asientos',\r\n            width: 100\r\n        },\r\n        {\r\n            headerName: 'Velocidad Máxima',\r\n            field: 'ktas',\r\n            width: 130\r\n        },\r\n        {\r\n            headerName: 'Horas Vuelo',\r\n            field: 'horas_vuelo',\r\n            width: 120\r\n        },\r\n        {\r\n            headerName: 'Estado Actual',\r\n            field: 'estado_actual',\r\n            width: 130\r\n        },\r\n        {\r\n            headerName: 'Acción',\r\n            cellRenderer: function (params) {\r\n                const editButton = document.createElement('I');\r\n                editButton.className = \"fa-regular fa-pen-to-square btn btn-editar\";\r\n                editButton.title = 'Editar';\r\n\r\n                // Datos a Editar\r\n                editButton.addEventListener('click', async function () {\r\n                    await mostrarContenedorAltas();\r\n\r\n                    $('#aeronave_id').val(params.data.aeronave_id);\r\n                    $('#modelo').val(params.data.modelo);\r\n                    $('#ktas').val(params.data.ktas);\r\n                    $('#matricula').val(params.data.matricula);\r\n                    $('#fabricante').val(params.data.fabricante);\r\n                    $('#numero_serie').val(params.data.numero_serie);\r\n                    $('#anio_fabricante').val(params.data.anio_fabricante);\r\n                    $('#asientos').val(params.data.asientos);\r\n                    $('#ultima_revision').val(params.data.ultima_revision);\r\n                    $('#horas').val(params.data.horas);\r\n                    $('#estado_actual').val(params.data.estado_actual);\r\n                    $('#fecha_retiro').val(params.data.fecha_retiro);\r\n\r\n                    \r\n                });\r\n\r\n                const actionContainer = document.createElement('div');\r\n                actionContainer.classList = \"btn-cont centrado\";\r\n                actionContainer.appendChild(editButton);\r\n\r\n                return actionContainer;\r\n            },\r\n            width: 150,\r\n            headerClass: 'txt-center',\r\n            cellClass: 'custom-action-cell', // Agregar la clase CSS 'custom-action-cell' a todas las celdas en esta columna\r\n            filter: false\r\n        }\r\n    ];\r\n\r\n    let data = '';\r\n    iniciarTabla(data, columnDefs, '#myGrid');\r\n    traerAeronaves();\r\n}\r\n\r\nasync function traerAeronaves() {\r\n    try {\r\n        const respuesta = await fetch('allAeronaves', {\r\n            method: 'GET',\r\n        });\r\n        const data = await respuesta.json();\r\n        // console.log(data);\r\n\r\n        let convert = verificarArray (data);\r\n        gridApi.setGridOption('rowData', convert);\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        SwalToast('warning', 'Error al obtener los usuarios', 2500);\r\n    }\r\n}\r\n\r\nasync function mostrarContenedorAltas() {\r\n    $(\".contenedor-altas\").show();\r\n}\r\n\r\nfunction resetFormAeronave() {\r\n    cerrarVentana('.contenedor-altas', ['#formAltas']);\r\n}\r\n\r\nasync function crearAeronave() {\r\n\r\n    const modelo = $('#modelo').val();\r\n    const ktas = $('#ktas').val();\r\n    const matricula = $('#matricula').val();\r\n    const fabricante = $('#fabricante').val();\r\n    const numero_serie = $('#numero_serie').val();\r\n    const anio_fabricante = $('#anio_fabricante').val();\r\n    const asientos = $('#asientos').val();\r\n    const ultima_revision = $('#ultima_revision').val();\r\n    const horas = $('#horas').val();\r\n    const estado_actual = $('#estado_actual').val();\r\n    const fecha_retiro = $('#fecha_retiro').val();\r\n\r\n    try {\r\n\r\n        const datos = new FormData();\r\n        datos.append('modelo', modelo);\r\n        datos.append('ktas', ktas);\r\n        datos.append('matricula', matricula);\r\n        datos.append('fabricante', fabricante);\r\n        datos.append('numero_serie', numero_serie);\r\n        datos.append('anio_fabricante', anio_fabricante);\r\n        datos.append('asientos', asientos);\r\n        datos.append('ultima_revision', ultima_revision);\r\n        datos.append('horas', horas);\r\n        datos.append('estado_actual', estado_actual);\r\n        datos.append('fecha_retiro', fecha_retiro);\r\n\r\n        const respuesta = await fetch('crear/aeronave', {\r\n            method: 'POST',\r\n            body: datos\r\n        });\r\n\r\n        const data = await respuesta.json();\r\n        // console.log(data);\r\n\r\n        if (data.exito == 1) {\r\n            // Registro Creado Exitosamente\r\n            SwalLoad('success', 'Éxito', 'Registro Creado Correctamente', false);\r\n            setTimeout(() => {\r\n                swal.close();\r\n                resetFormAeronave();\r\n                traerAeronaves();\r\n            }, 1500);\r\n        } else if (data.exito == 0) {\r\n            SwalLoad('error', 'Error en la Transacción', data.errorSMS, true);\r\n        }\r\n        if (data.alertas) {\r\n            SwalToast('warning', data.alertas.error, 2500);\r\n        }\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        SwalLoad('error', 'Error en la Conexión', 'Comunicate con el Administrador', false);\r\n    }\r\n\r\n}\r\n\r\nasync function actualizarAeronave() {\r\n\r\n    const aeronave_id = $('#aeronave_id').val();\r\n    const modelo = $('#modelo').val();\r\n    const ktas = $('#ktas').val();\r\n    const matricula = $('#matricula').val();\r\n    const fabricante = $('#fabricante').val();\r\n    const numero_serie = $('#numero_serie').val();\r\n    const anio_fabricante = $('#anio_fabricante').val();\r\n    const asientos = $('#asientos').val();\r\n    const ultima_revision = $('#ultima_revision').val();\r\n    const horas = $('#horas').val();\r\n    const estado_actual = $('#estado_actual').val();\r\n    const fecha_retiro = $('#fecha_retiro').val();\r\n\r\n    try {\r\n\r\n        const datos = new FormData();\r\n        datos.append('aeronave_id', aeronave_id);\r\n        datos.append('modelo', modelo);\r\n        datos.append('ktas', ktas);\r\n        datos.append('matricula', matricula);\r\n        datos.append('fabricante', fabricante);\r\n        datos.append('numero_serie', numero_serie);\r\n        datos.append('anio_fabricante', anio_fabricante);\r\n        datos.append('asientos', asientos);\r\n        datos.append('ultima_revision', ultima_revision);\r\n        datos.append('horas', horas);\r\n        datos.append('estado_actual', estado_actual);\r\n        datos.append('fecha_retiro', fecha_retiro);\r\n\r\n        const respuesta = await fetch('actualizar/aeronave', {\r\n            method: 'POST',\r\n            body: datos\r\n        });\r\n\r\n        const data = await respuesta.json();\r\n\r\n        if (data.exito == 1) {\r\n            // Registro Creado Exitosamente\r\n            SwalLoad('success', 'Éxito', 'Registro Actualizado Correctamente', false);\r\n            setTimeout(() => {\r\n                swal.close();\r\n                resetFormAeronave();\r\n                traerAeronaves();\r\n            }, 1500);\r\n        } else if (data.exito == 0) {\r\n            SwalLoad('error', 'Error en la Transacción', data.errorSMS, true);\r\n        }\r\n\r\n        if (data.alertas) {\r\n            SwalToast('warning', data.alertas.error, 2500);\r\n        }\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        SwalLoad('error', 'Error en la Conexión', 'Comunicate con el Administrador', false);\r\n    }\r\n\r\n}\r\n"]}