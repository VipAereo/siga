let gridOptions;function asignarEventos(){$(".pilotoSearch").hide(),$(".aeroSearch").hide(),document.addEventListener("keydown",o=>{"Escape"===o.key&&resetForm()}),document.getElementById("piloto_id").addEventListener("mousedown",(async function(o){o.preventDefault(),$(".pilotoSearch").show(),$(".inPilotoSrch").focus();let e=await obtenerPilotos();await mostrarListaSearch(e,".pilotoSearch","empleado_id","nombre_empleado")})),document.getElementById("aeronave_id").addEventListener("mousedown",(async function(o){o.preventDefault(),$(".aeroSearch").show(),$(".inAeroSrch").focus();let e=await obtenerAeronaves();await mostrarListaSearch(e,".aeroSearch","aeronave_id","modelo")}))}function configurarBotones(){$(".contenedor-altas").hide(),$("#crear-pilotoAero").click(mostrarContenedorAltas),$(".btn-cancelar").click(o=>{resetForm()}),$("#btnGuardar").click(o=>{validateInputs($("#formAltas"))&&(""==$("#piloto_aero_id").val()?crearPilotAero():actualizarPilotAero())})}function inicializarPagina(){iniciarTabla("",[{headerName:"id",field:"piloto_aero_id",width:80},{headerName:"Piloto",field:"nombre_empleado",width:160},{headerName:"Aeronave",field:"modelo",width:250},{headerName:"Acción",cellRenderer:function(o){const e=document.createElement("I");e.className="fa-regular fa-pen-to-square btn btn-editar",e.title="Editar",e.addEventListener("click",(async function(){await mostrarContenedorAltas(),$("#piloto_aero_id").val(o.data.piloto_aero_id),$("#piloto_id option").val(o.data.piloto_id),$("#piloto_id option").text(o.data.nombre_empleado),$("#aeronave_id option").val(o.data.aeronave_id),$("#aeronave_id option").text(o.data.modelo)}));const a=document.createElement("div");return a.classList="btn-cont centrado",a.appendChild(e),a},width:150,headerClass:"txt-center",cellClass:"custom-action-cell",filter:!1}],"#myGrid"),traePilotoAero()}async function traePilotoAero(){try{const o=await fetch("allPilotoAero",{method:"GET"}),e=await o.json();let a=verificarArray(e);gridApi.setGridOption("rowData",a)}catch(o){console.error(o),SwalToast("warning","Error al obtener los usuarios",2500)}}function resetForm(){cerrarVentana(".contenedor-altas",["#formAltas"])}async function mostrarContenedorAltas(){$(".contenedor-altas").show(),await obtenerPilotos(),await obtenerAeronaves()}async function obtenerPilotos(){try{const o=await fetch("pilotos/activos",{method:"GET"}),e=await o.json();return!e.length>0&&SwalToast("warning","No hay Programas disponibles.",2500),e}catch(o){console.error(o),SwalLoad("error","Ocurrio Un Error","Conección Perdida a BD.",!1)}}async function obtenerAeronaves(){try{const o=await fetch("aeronaves/activas",{method:"GET"}),e=await o.json();return!e.length>0&&SwalToast("warning","No hay Aeronaves disponibles.",2500),e}catch(o){console.error(o),SwalLoad("error","Ocurrio Un Error","Conección Perdida a BD.",!1)}}async function crearPilotAero(){const o=$("#piloto_id").val(),e=$("#aeronave_id").val();try{const a=new FormData;a.append("piloto_id",o),a.append("aeronave_id",e);const r=await fetch("crear/pilotoAero",{method:"POST",body:a}),t=await r.json();1==t.exito?(SwalLoad("success","Éxito","Registro Creado Correctamente",!1),setTimeout(()=>{swal.close(),resetForm(),traePilotoAero()},1500)):0==t.exito&&SwalLoad("error","Error en la Transacción",t.errorSMS,!0),t.alertas&&SwalToast("warning",t.alertas.error,2500)}catch(o){console.error(o),SwalLoad("error","Error en la Conexión","Comunicate con el Administrador",!1)}}async function actualizarPilotAero(){const o=$("#piloto_aero_id").val(),e=$("#piloto_id").val(),a=$("#aeronave_id").val();try{const r=new FormData;r.append("piloto_aero_id",o),r.append("piloto_id",e),r.append("aeronave_id",a);const t=await fetch("actualizar/pilotoAero",{method:"POST",body:r}),n=await t.json();1==n.exito?(SwalLoad("success","Éxito","Registro Actualizado Correctamente",!1),setTimeout(()=>{swal.close(),resetForm(),traePilotoAero()},1500)):0==n.exito&&SwalLoad("error","Error en la Transacción",n.errorSMS,!0),n.alertas&&SwalToast("warning",n.alertas.error,2500)}catch(o){console.error(o),SwalLoad("error","Error en la Conexión","Comunicate con el Administrador",!1)}}$((function(){asignarEventos(),inicializarPagina(),configurarBotones()}));
//# sourceMappingURL=pilotoAero.js.map
