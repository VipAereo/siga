{"version":3,"sources":["header.js"],"names":["glob","rutaServer","menu","bandera","eventos","menuPerfil","document","querySelector","infoPerfil","addEventListener","classList","toggle","event","contains","target","add","async","iniciarApp","console","log","obtenerDatos","tabs","respuesta","fetch","location","origin","method","data","json","sort","a","b","PadreId","Nivel","crearMenuMovil","crearMenu","error","alert","querySelectorAll","forEach","boton","e","seccionAnterior","remove","paso","parseInt","dataset","$","empty","mostrarAside","tab","i","Nombre","replace","link","append","setAttribute","seccionMenu","createElement","seccionAside","sideUl","article","appendChild","crearSubMenu","length","className","cMenu","cSubMenu","ss","treeElement","nuevo","submenu","parentNode","mostrarArticulo","obtenerRuta","parentElement","parentId","children","filter","item","ul","child","li","span","MenuId","textContent","Ruta","slideToggle","menuArbol","construirArbol","getElementById","innerHTML","generateMenu","menuItems","menuItemsLvl1","valorClass","isActive","j","parentLink","preventDefault","style","display","href","getAttribute","window","toggleMenu","navBr","menuData","menuHtml","key","submenuHtml","hasSubmenu","Object","keys","innerWidth","checked","on","icon","this","find","toggleClass"],"mappings":"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","file":"header.js","sourcesContent":["let menu = [];\r\nlet glob;\r\nlet bandera = 0;\r\nlet rutaServer;\r\n\r\n\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n    iniciarApp();\r\n    eventos();\r\n});\r\n\r\nfunction eventos() {\r\n\r\n    const menuPerfil = document.querySelector('.header_icon');\r\n    let infoPerfil = document.querySelector('.header_icon_info');\r\n\r\n    const toggleInfoPerfil = () => {\r\n        infoPerfil.classList.toggle('ocultar');\r\n    };\r\n\r\n    menuPerfil.addEventListener('click', toggleInfoPerfil);\r\n\r\n    document.addEventListener('click', (event) => {\r\n        if (!infoPerfil.contains(event.target) && !menuPerfil.contains(event.target)) {\r\n            infoPerfil.classList.add('ocultar');\r\n        }\r\n    });\r\n\r\n}\r\n\r\nwindow.addEventListener('resize', function () {\r\n\r\n    if (window.innerWidth > 768) {\r\n        document.getElementById(\"menu\").classList.add(\"ocultar\");\r\n        document.querySelector('.menu').checked = false;\r\n        document.querySelector(\".navigation\").classList.remove(\"ocultar\");\r\n        document.querySelector(\".secciones\").classList.remove(\"ocultar\");\r\n        document.querySelector('.navigation ul').classList.remove('show');\r\n    } else {\r\n        document.querySelector(\".navigation\").classList.add(\"ocultar\");\r\n        document.querySelector(\".secciones\").classList.add(\"ocultar\");\r\n    }\r\n});\r\n\r\nasync function iniciarApp() {\r\n    console.log('iniciarAPp');\r\n    await obtenerDatos();\r\n    await tabs(); \r\n}\r\n\r\n\r\nasync function obtenerDatos() {\r\n\r\n    console.log('fetch');\r\n\r\n    // obtener datos de la BD \r\n    try {\r\n        // const respuesta = await fetch('http://localhost:3000/obtener/menu', {\r\n        const respuesta = await fetch(`${location.origin}/obtener/menu`, {\r\n            method: 'GET',\r\n        });\r\n        const data = await respuesta.json();\r\n        // console.log(data);\r\n\r\n        menu = data;\r\n        menu.sort((a, b) => a.PadreId - b.PadreId);\r\n        menu.sort((a, b) => a.Nivel - b.Nivel);\r\n        // console.log(menu);\r\n\r\n        // ver la forma de hacer esto en 1 sola función\r\n        await crearMenuMovil(menu);\r\n        await crearMenu(menu);\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        alert('Error al obtener datos BD');\r\n    }\r\n}\r\n\r\nfunction tabs() {\r\n    const botones = document.querySelectorAll('.navigation .navigation_list li');\r\n    botones.forEach(boton => {\r\n        boton.addEventListener('click', async function (e) {\r\n            const seccionAnterior = document.querySelector('.actual');\r\n            if (seccionAnterior) {\r\n                seccionAnterior.classList.remove('actual');\r\n            }\r\n            paso = parseInt(e.target.dataset.paso);\r\n            if (paso) {\r\n                const cc = document.querySelectorAll(`[data-paso='${paso}']`);\r\n                cc[0].classList.add('actual');\r\n                if (bandera == paso) {\r\n                    $(`section aside ul`).empty();\r\n                    $(`section aside ul li`).remove();\r\n                    $(`section article`).empty();\r\n                    const cc = document.querySelectorAll(`[data-paso='${paso}']`);\r\n                    cc[0].classList.remove('actual');\r\n                    bandera = 0\r\n                } else {\r\n                    $(`section aside ul li`).remove();\r\n                    $(`section article`).empty();\r\n                    await mostrarAside(paso);\r\n                    bandera = paso\r\n                }\r\n            }\r\n        })\r\n    });\r\n}\r\n\r\n\r\n\r\n// Desktop\r\nasync function crearMenu(menu) {\r\n    let tab;\r\n    let paso;\r\n\r\n    // $(\".navigation_list\").empty();\r\n    // document.querySelector('.secciones').innerHTML = '';\r\n\r\n    // rutaServer = await obtenerRuta();\r\n    rutaServer = location.origin;\r\n\r\n    for (i in menu) {\r\n        if (menu[i]['PadreId'] == null) {\r\n            let className = menu[i].Nombre.replace(\" \", \"\");\r\n\r\n            // Creamos el elemento <a> y le asignamos la ruta si está disponible\r\n            let link = '';\r\n\r\n            // Ruta LVL1 \r\n            if (menu[i]['Ruta']) {\r\n                link = `<a href=\"${rutaServer + '/' + menu[i]['Ruta']}\">${menu[i]['Nombre']}</a>`;\r\n            } else {\r\n                link = `${menu[i]['Nombre']}`;\r\n            }\r\n\r\n            // Agregamos el <li> con el enlace dentro\r\n            $(\".navigation_list\").append(`<li>${link}</li>`); // ecma6\r\n\r\n            document.querySelectorAll('.navigation ul li')[i].setAttribute('data-paso', menu[i]['MenuId']);\r\n            // se repite (NO debe)\r\n            tab = document.querySelector(`[data-paso=\"${menu[0]['MenuId']}\"]`);\r\n            paso = menu[0]['MenuId'];\r\n\r\n            // CREAR SECCIONES\r\n            const seccionMenu = document.createElement('SECTION');\r\n            seccionMenu.setAttribute('data-paso-sec', menu[i]['MenuId']);\r\n\r\n            const seccionAside = document.createElement('ASIDE');\r\n\r\n            const sideUl = document.createElement('UL');\r\n\r\n            const sideLI = document.createElement('LI');\r\n\r\n            const article = document.createElement('ARTICLE');\r\n            article.setAttribute('data-paso-art', menu[i]['MenuId']);\r\n\r\n            seccionMenu.appendChild(seccionAside);\r\n            seccionMenu.appendChild(article);\r\n            seccionAside.appendChild(sideUl);\r\n\r\n            document.querySelector('.secciones').appendChild(seccionMenu);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nfunction crearSubMenu(menu) {\r\n    for (var i = 0; i < menu.length; i++) {\r\n        //obtenemos la class que le dimos en la function pasada para \r\n        //agregar el  submenu\r\n        var className = menu[i].cMenu.replace(\" \", \"\");\r\n        if (i == 0) {\r\n            //agregamos un <ul> el cual va hacer el contenedor del submenu\r\n            $(\".\" + className).append('<ul class=\"subNav\"></ul>')\r\n        }\r\n        //y por ultimo agregamos los item al submenu\r\n        $(\".\" + className + \" ul\").append(\"<li   class=\" + className + \">\" + menu[i].cSubMenu + \"</li>\")\r\n    }\r\n}\r\n\r\nasync function mostrarAside(paso) {\r\n\r\n    const menuAside = document.querySelector(`[data-paso-sec=\"${paso}\"]`);\r\n\r\n    for (i in menu) {\r\n        if (menu[i]['PadreId'] == paso) {\r\n            // console.log(menu[i]['Ruta']);\r\n            // validamos aqui si tiene ruta \r\n            $(`[data-paso-sec=\"${paso}\"] aside ul`).append(`<li><a data-submenu='${menu[i]['MenuId']}' ${menu[i]['Ruta'] ? `href='${rutaServer + '/' + menu[i]['Ruta']}'` : ''}>${menu[i]['Nombre']}</a></li>`);\r\n        }\r\n    }\r\n\r\n    const ss = document.querySelectorAll(`[data-paso-sec=\"${paso}\"] aside ul li a`);\r\n    const treeElement = document.querySelector(`[data-paso-art=\"${paso}\"]`);\r\n\r\n    ss.forEach(boton => {\r\n        boton.addEventListener('click', function (e) {\r\n\r\n\r\n\r\n            $(`[data-paso-art=\"${paso}\"]`).empty();\r\n            let nuevo = parseInt(e.target.dataset.submenu);\r\n            // quitar clase a los demas li \r\n            const cc = document.querySelectorAll(`.asideActivo`);\r\n            if (cc.length > 0) {\r\n\r\n                // console.log(cc[0].classList.remove(`asideActivo`));\r\n            }\r\n\r\n            boton.parentNode.classList.add('asideActivo')\r\n\r\n            mostrarArticulo(treeElement, menu, nuevo);\r\n        })\r\n    });\r\n\r\n}\r\n\r\nasync function obtenerRuta() {\r\n\r\n    try {\r\n        const respuesta = await fetch(`${location.origin}/ruta`, {\r\n            method: 'get',\r\n        });\r\n        const data = await respuesta.json();\r\n        return data;\r\n    } catch (error) {\r\n\r\n    }\r\n\r\n}\r\n\r\nfunction mostrarArticulo(parentElement, data, parentId) {\r\n\r\n    const secciones = document.querySelectorAll(`[data-Nivel='3'] [data-Nivel] `);\r\n\r\n    secciones.forEach(boton => {\r\n        boton.addEventListener('click', function (e) {\r\n            // console.log(boton);\r\n            boton.classList.add('test');\r\n        })\r\n    });\r\n\r\n    const children = data.filter(item => item.PadreId === parentId);\r\n    // aqui se creea el 3er nivel +\r\n    if (children.length > 0) {\r\n\r\n        const ul = document.createElement('ul');\r\n        parentElement.appendChild(ul);\r\n        ul.classList.add('mostrar');\r\n\r\n        children.forEach(child => {\r\n\r\n            const li = document.createElement('li');\r\n\r\n            ul.appendChild(li);\r\n            ul.setAttribute('data-Nivel', child.Nivel);\r\n\r\n            const span = document.createElement('span');\r\n            span.setAttribute('data-menu', child.MenuId);\r\n            span.textContent = child.Nombre;\r\n\r\n            let link = document.createElement('A');\r\n            link.setAttribute('data-menu', child.MenuId);\r\n            link.textContent = child.Nombre;\r\n            // Agregar clase si tiene una propiedad 'Ruta'\r\n            if (child.Ruta) {\r\n                li.classList.add('conRuta');\r\n                // console.log(rutaServer);\r\n                link.setAttribute('href', child.Ruta);\r\n            }\r\n\r\n            link.addEventListener('click', function (e) {\r\n\r\n                if (child.Ruta) {\r\n                    // window.open(child.Ruta, '_blank');\r\n                    // window.open(child.Ruta);\r\n                } else {\r\n\r\n                    const submenu = $(li).children('ul');\r\n                    // console.log(li);\r\n                    // console.log('AQUI PUEDE IR EL CONTEO');\r\n                    if (submenu.length > 0) {\r\n                        submenu.slideToggle();\r\n                    } else {\r\n                        // console.log('mas hijos');\r\n                        mostrarArticulo(li, data, child.MenuId);\r\n                    }\r\n                }\r\n            });\r\n\r\n            // li.appendChild(span);\r\n            li.appendChild(link);\r\n        });\r\n    }\r\n\r\n\r\n}\r\n\r\n// Menu Movil\r\nasync function crearMenuMovil(menu) {\r\n    const menuArbol = construirArbol(menu);\r\n\r\n    // console.log(menuArbol);\r\n    document.getElementById('menu').innerHTML = generateMenu(menuArbol);\r\n\r\n    var menuItems = document.querySelectorAll('#menu li');\r\n    var menuItemsLvl1 = document.querySelectorAll('#menu > li');\r\n\r\n    menuItemsLvl1.forEach(function (item) {\r\n        // icono activo \r\n        item.addEventListener('click', function (e) {\r\n            let valorClass = item.children[0];\r\n            // Verifica si este icono tiene la clase 'activa'\r\n            var isActive = valorClass.classList.contains(\"activa\");\r\n            // Elimina la clase 'activa' de todos los elementos\r\n            for (var j = 0; j < menuItemsLvl1.length; j++) {\r\n                menuItemsLvl1[j].children[0].classList.remove(\"menu-activo\");\r\n            }\r\n            // Si este icono no tenía la clase 'activa', agrégasela\r\n            if (!isActive) {\r\n                valorClass.classList.add(\"menu-activo\");\r\n            }\r\n        });\r\n    });\r\n\r\n    menuItems.forEach(function (item) {\r\n\r\n        var parentLink = item.querySelector('.parent');\r\n\r\n        parentLink.addEventListener('click', function (e) {\r\n            var submenu = item.querySelector('.submenu');\r\n\r\n            e.preventDefault();\r\n            if (submenu) {\r\n                submenu.style.display = (submenu.style.display === 'block') ? 'none' : 'block';\r\n            } else {\r\n                var href = parentLink.getAttribute('href');\r\n                // console.log(href);\r\n                if (href) {\r\n                    window.location.href = href;\r\n                }\r\n            }\r\n        });\r\n\r\n    });\r\n}\r\nfunction toggleMenu() {\r\n    // let navBr = document.getElementById(\"menu\");\r\n    let navBr = document.getElementById(\"menu\");\r\n    navBr.classList.toggle('ocultar');\r\n    navBr.classList.toggle('mostrar');\r\n}\r\n\r\nfunction generateMenu(menuData, parentElement) {\r\n    var menuHtml = '';\r\n    for (var key in menuData) {\r\n        var item = menuData[key];\r\n        var submenuHtml = '';\r\n        var hasSubmenu = item.submenu && Object.keys(item.submenu).length > 0; // Verifica si hay submenú\r\n\r\n        if (hasSubmenu) {\r\n            let val = parseInt(item.Nivel) + 1;\r\n            submenuHtml = '<ul class=\"submenu\" data-nivel=\"' + val + '\">' + generateMenu(item.submenu) + '</ul>';\r\n        }\r\n\r\n        menuHtml += '<li class=\"menu-item' + (hasSubmenu ? ' has-submenu' : '') + '\">' +\r\n            '<a ' + (item.Ruta ? 'href=\"' + `${location.origin}/` + item.Ruta + '\" ' : '') + ' class=\"parent\" ' + (item.Ruta ? 'target=\"_self\"' : '') + '>' +\r\n            item.Nombre +\r\n            (hasSubmenu ? '<span class=\"arrow-down\"></span>' : '') + // Agrega un icono si hay submenú\r\n            '</a>' +\r\n            submenuHtml +\r\n            '</li>';\r\n    }\r\n    return menuHtml;\r\n}\r\nfunction construirArbol(menuData, parentId = null) {\r\n    const menuItems = menuData.filter(item => item.PadreId === parentId);\r\n\r\n    if (menuItems.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    const menu = {};\r\n\r\n    menuItems.forEach(item => {\r\n        const submenu = construirArbol(menuData, item.MenuId);\r\n        if (submenu) {\r\n            item.submenu = submenu;\r\n        }\r\n        menu[item.MenuId] = item;\r\n    });\r\n\r\n    return menu;\r\n}\r\n\r\n\r\n\r\n// // FUNCION PARA CONTROLAR  EL MENU MOVIL CON FLECHAS\r\n// $(document).on(\"click\", \".menu-item a\", e => {\r\n\r\n//     var icon = e.target.children[0];\r\n//     if (icon) {\r\n\r\n//         if (icon.tagName.toLowerCase() === 'span') {\r\n\r\n//             if (icon.classList.contains('arrow-down')) {\r\n//                 icon.classList.add('arrow-up');\r\n//                 icon.classList.remove('arrow-down');\r\n//             } else {\r\n//                 icon.classList.remove('arrow-up');\r\n//                 icon.classList.add('arrow-down');\r\n//             }\r\n//         }\r\n//     }\r\n// });\r\n\r\n\r\n// FUNCION PARA CONTROLAR  EL MENU MOVIL CON FLECHAS\r\n$(document).on(\"click\", \".menu-item a\", function () {\r\n    var icon = $(this).find('span.arrow-down, span.arrow-up');\r\n    if (icon.length) {\r\n        icon.toggleClass('arrow-down arrow-up');\r\n    }\r\n});"]}