{"version":3,"sources":["header.js"],"names":["glob","rutaServer","menu","bandera","eventos","menuPerfil","document","querySelector","infoPerfil","addEventListener","classList","toggle","event","contains","target","add","async","iniciarApp","obtenerDatos","tabs","respuesta","fetch","location","origin","method","data","json","sort","a","b","PadreId","Nivel","crearMenuMovil","crearMenu","error","console","alert","querySelectorAll","forEach","boton","e","seccionAnterior","remove","paso","parseInt","dataset","$","empty","mostrarAside","tab","i","obtenerRuta","Nombre","replace","link","append","setAttribute","seccionMenu","createElement","seccionAside","sideUl","article","appendChild","crearSubMenu","length","className","cMenu","cSubMenu","ss","treeElement","nuevo","submenu","parentNode","mostrarArticulo","parentElement","parentId","children","filter","item","ul","child","li","span","MenuId","textContent","Ruta","slideToggle","menuArbol","construirArbol","getElementById","innerHTML","generateMenu","menuItems","menuItemsLvl1","valorClass","isActive","j","parentLink","preventDefault","style","display","href","getAttribute","window","toggleMenu","navBr","menuData","menuHtml","key","submenuHtml","hasSubmenu","Object","keys","innerWidth","checked","on","icon","this","find","toggleClass"],"mappings":"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","file":"header.js","sourcesContent":["let menu = [];\r\nlet glob;\r\nlet bandera = 0;\r\nlet rutaServer;\r\n\r\n\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n    iniciarApp();\r\n    eventos();\r\n});\r\n\r\nfunction eventos() {\r\n\r\n    const menuPerfil = document.querySelector('.header_icon');\r\n    let infoPerfil = document.querySelector('.header_icon_info');\r\n\r\n    const toggleInfoPerfil = () => {\r\n        infoPerfil.classList.toggle('ocultar');\r\n    };\r\n\r\n    menuPerfil.addEventListener('click', toggleInfoPerfil);\r\n\r\n    document.addEventListener('click', (event) => {\r\n        if (!infoPerfil.contains(event.target) && !menuPerfil.contains(event.target)) {\r\n            infoPerfil.classList.add('ocultar');\r\n        }\r\n    });\r\n\r\n}\r\n\r\nwindow.addEventListener('resize', function () {\r\n\r\n    if (window.innerWidth > 768) {\r\n        document.getElementById(\"menu\").classList.add(\"ocultar\");\r\n        document.querySelector('.menu').checked = false;\r\n        document.querySelector(\".navigation\").classList.remove(\"ocultar\");\r\n        document.querySelector(\".secciones\").classList.remove(\"ocultar\");\r\n        document.querySelector('.navigation ul').classList.remove('show');\r\n    } else {\r\n        document.querySelector(\".navigation\").classList.add(\"ocultar\");\r\n        document.querySelector(\".secciones\").classList.add(\"ocultar\");\r\n    }\r\n});\r\n\r\nasync function iniciarApp() {\r\n    await obtenerDatos();\r\n    await tabs();\r\n}\r\n\r\n\r\nasync function obtenerDatos() {\r\n\r\n    // obtener datos de la BD \r\n    try {\r\n        // const respuesta = await fetch('http://localhost:3000/obtener/menu', {\r\n        const respuesta = await fetch(`${location.origin}/obtener/menu`, {\r\n            method: 'GET',\r\n        });\r\n        const data = await respuesta.json();\r\n        // console.log(data);\r\n\r\n        menu = data;\r\n        menu.sort((a, b) => a.PadreId - b.PadreId);\r\n        menu.sort((a, b) => a.Nivel - b.Nivel);\r\n        // console.log(menu);\r\n\r\n        // ver la forma de hacer esto en 1 sola función\r\n        await crearMenuMovil(menu);\r\n        await crearMenu(menu);\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        alert('Error al obtener datos BD');\r\n    }\r\n}\r\n\r\nfunction tabs() {\r\n    const botones = document.querySelectorAll('.navigation .navigation_list li');\r\n    botones.forEach(boton => {\r\n        boton.addEventListener('click', async function (e) {\r\n            const seccionAnterior = document.querySelector('.actual');\r\n            if (seccionAnterior) {\r\n                seccionAnterior.classList.remove('actual');\r\n            }\r\n            paso = parseInt(e.target.dataset.paso);\r\n            if (paso) {\r\n                const cc = document.querySelectorAll(`[data-paso='${paso}']`);\r\n                cc[0].classList.add('actual');\r\n                if (bandera == paso) {\r\n                    $(`section aside ul`).empty();\r\n                    $(`section aside ul li`).remove();\r\n                    $(`section article`).empty();\r\n                    const cc = document.querySelectorAll(`[data-paso='${paso}']`);\r\n                    cc[0].classList.remove('actual');\r\n                    bandera = 0\r\n                } else {\r\n                    $(`section aside ul li`).remove();\r\n                    $(`section article`).empty();\r\n                    await mostrarAside(paso);\r\n                    bandera = paso\r\n                }\r\n            }\r\n        })\r\n    });\r\n}\r\n\r\n\r\n\r\n// Desktop\r\nasync function crearMenu(menu) {\r\n    let tab;\r\n    let paso;\r\n\r\n    // $(\".navigation_list\").empty();\r\n    // document.querySelector('.secciones').innerHTML = '';\r\n\r\n    rutaServer = await obtenerRuta();\r\n\r\n    for (i in menu) {\r\n        if (menu[i]['PadreId'] == null) {\r\n            let className = menu[i].Nombre.replace(\" \", \"\");\r\n\r\n            // Creamos el elemento <a> y le asignamos la ruta si está disponible\r\n            let link = '';\r\n\r\n            // Ruta LVL1 \r\n            if (menu[i]['Ruta']) {\r\n                link = `<a href=\"${rutaServer + '/' + menu[i]['Ruta']}\">${menu[i]['Nombre']}</a>`;\r\n            } else {\r\n                link = `${menu[i]['Nombre']}`;\r\n            }\r\n\r\n            // Agregamos el <li> con el enlace dentro\r\n            $(\".navigation_list\").append(`<li>${link}</li>`); // ecma6\r\n\r\n            document.querySelectorAll('.navigation ul li')[i].setAttribute('data-paso', menu[i]['MenuId']);\r\n            // se repite (NO debe)\r\n            tab = document.querySelector(`[data-paso=\"${menu[0]['MenuId']}\"]`);\r\n            paso = menu[0]['MenuId'];\r\n\r\n            // CREAR SECCIONES\r\n            const seccionMenu = document.createElement('SECTION');\r\n            seccionMenu.setAttribute('data-paso-sec', menu[i]['MenuId']);\r\n\r\n            const seccionAside = document.createElement('ASIDE');\r\n\r\n            const sideUl = document.createElement('UL');\r\n\r\n            const sideLI = document.createElement('LI');\r\n\r\n            const article = document.createElement('ARTICLE');\r\n            article.setAttribute('data-paso-art', menu[i]['MenuId']);\r\n\r\n            seccionMenu.appendChild(seccionAside);\r\n            seccionMenu.appendChild(article);\r\n            seccionAside.appendChild(sideUl);\r\n\r\n            document.querySelector('.secciones').appendChild(seccionMenu);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nfunction crearSubMenu(menu) {\r\n    for (var i = 0; i < menu.length; i++) {\r\n        //obtenemos la class que le dimos en la function pasada para \r\n        //agregar el  submenu\r\n        var className = menu[i].cMenu.replace(\" \", \"\");\r\n        if (i == 0) {\r\n            //agregamos un <ul> el cual va hacer el contenedor del submenu\r\n            $(\".\" + className).append('<ul class=\"subNav\"></ul>')\r\n        }\r\n        //y por ultimo agregamos los item al submenu\r\n        $(\".\" + className + \" ul\").append(\"<li   class=\" + className + \">\" + menu[i].cSubMenu + \"</li>\")\r\n    }\r\n}\r\n\r\nasync function mostrarAside(paso) {\r\n\r\n    const menuAside = document.querySelector(`[data-paso-sec=\"${paso}\"]`);\r\n\r\n    for (i in menu) {\r\n        if (menu[i]['PadreId'] == paso) {\r\n            // console.log(menu[i]['Ruta']);\r\n            // validamos aqui si tiene ruta \r\n            $(`[data-paso-sec=\"${paso}\"] aside ul`).append(`<li><a data-submenu='${menu[i]['MenuId']}' ${menu[i]['Ruta'] ? `href='${rutaServer + '/' + menu[i]['Ruta']}'` : ''}>${menu[i]['Nombre']}</a></li>`);\r\n        }\r\n    }\r\n\r\n    const ss = document.querySelectorAll(`[data-paso-sec=\"${paso}\"] aside ul li a`);\r\n    const treeElement = document.querySelector(`[data-paso-art=\"${paso}\"]`);\r\n\r\n    ss.forEach(boton => {\r\n        boton.addEventListener('click', function (e) {\r\n\r\n\r\n\r\n            $(`[data-paso-art=\"${paso}\"]`).empty();\r\n            let nuevo = parseInt(e.target.dataset.submenu);\r\n            // quitar clase a los demas li \r\n            const cc = document.querySelectorAll(`.asideActivo`);\r\n            if (cc.length > 0) {\r\n\r\n                // console.log(cc[0].classList.remove(`asideActivo`));\r\n            }\r\n\r\n            boton.parentNode.classList.add('asideActivo')\r\n\r\n            mostrarArticulo(treeElement, menu, nuevo);\r\n        })\r\n    });\r\n\r\n}\r\n\r\nasync function obtenerRuta() {\r\n\r\n    try {\r\n        const respuesta = await fetch(`${location.origin}/ruta`, {\r\n            method: 'get',\r\n        });\r\n        const data = await respuesta.json();\r\n        return data;\r\n    } catch (error) {\r\n\r\n    }\r\n\r\n}\r\n\r\nfunction mostrarArticulo(parentElement, data, parentId) {\r\n\r\n    const secciones = document.querySelectorAll(`[data-Nivel='3'] [data-Nivel] `);\r\n\r\n    secciones.forEach(boton => {\r\n        boton.addEventListener('click', function (e) {\r\n            // console.log(boton);\r\n            boton.classList.add('test');\r\n        })\r\n    });\r\n\r\n    const children = data.filter(item => item.PadreId === parentId);\r\n    // aqui se creea el 3er nivel +\r\n    if (children.length > 0) {\r\n\r\n        const ul = document.createElement('ul');\r\n        parentElement.appendChild(ul);\r\n        ul.classList.add('mostrar');\r\n\r\n        children.forEach(child => {\r\n\r\n            const li = document.createElement('li');\r\n\r\n            ul.appendChild(li);\r\n            ul.setAttribute('data-Nivel', child.Nivel);\r\n\r\n            const span = document.createElement('span');\r\n            span.setAttribute('data-menu', child.MenuId);\r\n            span.textContent = child.Nombre;\r\n\r\n            let link = document.createElement('A');\r\n            link.setAttribute('data-menu', child.MenuId);\r\n            link.textContent = child.Nombre;\r\n            // Agregar clase si tiene una propiedad 'Ruta'\r\n            if (child.Ruta) {\r\n                li.classList.add('conRuta');\r\n                // console.log(rutaServer);\r\n                link.setAttribute('href', child.Ruta);\r\n            }\r\n\r\n            link.addEventListener('click', function (e) {\r\n\r\n                if (child.Ruta) {\r\n                    // window.open(child.Ruta, '_blank');\r\n                    // window.open(child.Ruta);\r\n                } else {\r\n\r\n                    const submenu = $(li).children('ul');\r\n                    // console.log(li);\r\n                    // console.log('AQUI PUEDE IR EL CONTEO');\r\n                    if (submenu.length > 0) {\r\n                        submenu.slideToggle();\r\n                    } else {\r\n                        // console.log('mas hijos');\r\n                        mostrarArticulo(li, data, child.MenuId);\r\n                    }\r\n                }\r\n            });\r\n\r\n            // li.appendChild(span);\r\n            li.appendChild(link);\r\n        });\r\n    }\r\n\r\n\r\n}\r\n\r\n// Menu Movil\r\nasync function crearMenuMovil(menu) {\r\n    const menuArbol = construirArbol(menu);\r\n\r\n    // console.log(menuArbol);\r\n    document.getElementById('menu').innerHTML = generateMenu(menuArbol);\r\n\r\n    var menuItems = document.querySelectorAll('#menu li');\r\n    var menuItemsLvl1 = document.querySelectorAll('#menu > li');\r\n\r\n    menuItemsLvl1.forEach(function (item) {\r\n        // icono activo \r\n        item.addEventListener('click', function (e) {\r\n            let valorClass = item.children[0];\r\n            // Verifica si este icono tiene la clase 'activa'\r\n            var isActive = valorClass.classList.contains(\"activa\");\r\n            // Elimina la clase 'activa' de todos los elementos\r\n            for (var j = 0; j < menuItemsLvl1.length; j++) {\r\n                menuItemsLvl1[j].children[0].classList.remove(\"menu-activo\");\r\n            }\r\n            // Si este icono no tenía la clase 'activa', agrégasela\r\n            if (!isActive) {\r\n                valorClass.classList.add(\"menu-activo\");\r\n            }\r\n        });\r\n    });\r\n\r\n    menuItems.forEach(function (item) {\r\n\r\n        var parentLink = item.querySelector('.parent');\r\n\r\n        parentLink.addEventListener('click', function (e) {\r\n            var submenu = item.querySelector('.submenu');\r\n\r\n            e.preventDefault();\r\n            if (submenu) {\r\n                submenu.style.display = (submenu.style.display === 'block') ? 'none' : 'block';\r\n            } else {\r\n                var href = parentLink.getAttribute('href');\r\n                // console.log(href);\r\n                if (href) {\r\n                    window.location.href = href;\r\n                }\r\n            }\r\n        });\r\n\r\n    });\r\n}\r\nfunction toggleMenu() {\r\n    // let navBr = document.getElementById(\"menu\");\r\n    let navBr = document.getElementById(\"menu\");\r\n    navBr.classList.toggle('ocultar');\r\n    navBr.classList.toggle('mostrar');\r\n}\r\n\r\nfunction generateMenu(menuData, parentElement) {\r\n    var menuHtml = '';\r\n    for (var key in menuData) {\r\n        var item = menuData[key];\r\n        var submenuHtml = '';\r\n        var hasSubmenu = item.submenu && Object.keys(item.submenu).length > 0; // Verifica si hay submenú\r\n\r\n        if (hasSubmenu) {\r\n            let val = parseInt(item.Nivel) + 1;\r\n            submenuHtml = '<ul class=\"submenu\" data-nivel=\"' + val + '\">' + generateMenu(item.submenu) + '</ul>';\r\n        }\r\n\r\n        menuHtml += '<li class=\"menu-item' + (hasSubmenu ? ' has-submenu' : '') + '\">' +\r\n            '<a ' + (item.Ruta ? 'href=\"' + `${location.origin}/` + item.Ruta + '\" ' : '') + ' class=\"parent\" ' + (item.Ruta ? 'target=\"_self\"' : '') + '>' +\r\n            item.Nombre +\r\n            (hasSubmenu ? '<span class=\"arrow-down\"></span>' : '') + // Agrega un icono si hay submenú\r\n            '</a>' +\r\n            submenuHtml +\r\n            '</li>';\r\n    }\r\n    return menuHtml;\r\n}\r\nfunction construirArbol(menuData, parentId = null) {\r\n    const menuItems = menuData.filter(item => item.PadreId === parentId);\r\n\r\n    if (menuItems.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    const menu = {};\r\n\r\n    menuItems.forEach(item => {\r\n        const submenu = construirArbol(menuData, item.MenuId);\r\n        if (submenu) {\r\n            item.submenu = submenu;\r\n        }\r\n        menu[item.MenuId] = item;\r\n    });\r\n\r\n    return menu;\r\n}\r\n\r\n\r\n\r\n// // FUNCION PARA CONTROLAR  EL MENU MOVIL CON FLECHAS\r\n// $(document).on(\"click\", \".menu-item a\", e => {\r\n\r\n//     var icon = e.target.children[0];\r\n//     if (icon) {\r\n\r\n//         if (icon.tagName.toLowerCase() === 'span') {\r\n\r\n//             if (icon.classList.contains('arrow-down')) {\r\n//                 icon.classList.add('arrow-up');\r\n//                 icon.classList.remove('arrow-down');\r\n//             } else {\r\n//                 icon.classList.remove('arrow-up');\r\n//                 icon.classList.add('arrow-down');\r\n//             }\r\n//         }\r\n//     }\r\n// });\r\n\r\n\r\n// FUNCION PARA CONTROLAR  EL MENU MOVIL CON FLECHAS\r\n$(document).on(\"click\", \".menu-item a\", function () {\r\n    var icon = $(this).find('span.arrow-down, span.arrow-up');\r\n    if (icon.length) {\r\n        icon.toggleClass('arrow-down arrow-up');\r\n    }\r\n});"]}