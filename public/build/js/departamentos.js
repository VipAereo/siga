let gridOptions;function asignarEventos(){document.addEventListener("keydown",a=>{"Escape"===a.key&&cerrarVentana(".contenedor-altas",["#formAltas"])})}function configurarBotones(){$(".contenedor-altas").hide(),$("#crear-departamento").click(mostrarContenedorAltas),$("#btnCancel").click(a=>{limpiarForm("#formAltas"),$(".contenedor-altas").hide()}),$("#btnGuardar").click(a=>{validateInputs($("#formAltas"))&&(""==$("#departamento_id").val()?crearDepa():actualizarDepa())})}function inicializarPagina(){iniciarTabla("",[{headerName:"id",field:"departamento_id",width:80},{headerName:"Nombre",field:"nombre",width:150},{headerName:"Estatus",field:"estatus",width:100},{headerName:"Fecha de Creación",field:"fecha_creacion",width:160},{headerName:"Acción",cellRenderer:function(a){const e=document.createElement("I");e.className="fa-regular fa-pen-to-square btn btn-editar",e.title="Editar",e.addEventListener("click",(async function(){await mostrarContenedorAltas(),$("#departamento_id").val(a.data.departamento_id),$("#nombre").val(a.data.nombre),$("#estatus").val(a.data.estatus)}));const t=document.createElement("div");return t.classList="btn-cont centrado",t.appendChild(e),t},width:150,headerClass:"txt-center",cellClass:"custom-action-cell",filter:!1}],"#myGrid"),traerDepartamentos()}async function traerDepartamentos(){try{const a=await fetch("allDepartamentos",{method:"GET"}),e=await a.json();let t=verificarArray(e);gridApi.setGridOption("rowData",t)}catch(a){console.error(a),SwalToast("warning","Error al obtener los usuarios",2500)}}async function mostrarContenedorAltas(){$(".contenedor-altas").show()}async function crearDepa(){const a=$("#nombre").val(),e=$("#estatus").val();try{const t=new FormData;t.append("nombre",a),t.append("estatus",e);const r=await fetch("crear/departamento",{method:"POST",body:t}),n=await r.json();1==n.exito?(SwalLoad("success","Éxito","Departamento Creado Correctamente",!1),setTimeout(()=>{swal.close(),cerrarVentana(".contenedor-altas",["#formAltas"]),traerDepartamentos()},1500)):0==n.exito&&SwalLoad("error","Error en la Transacción",n.errorSMS,!0),n.alertas&&(SwalToast("warning",n.alertas.error,2500),cerrarVentana(".contenedor-altas",["#formAltas"]))}catch(a){console.error(a),SwalLoad("error","Error en la Conexión","Comunicate con el Administrador",!1)}}async function actualizarDepa(){const a=$("#departamento_id").val(),e=$("#nombre").val(),t=$("#estatus").val();try{const r=new FormData;r.append("departamento_id",a),r.append("nombre",e),r.append("estatus",t);const n=await fetch("actualizar/departamento",{method:"POST",body:r}),o=await n.json();1==o.exito?(SwalLoad("success","Éxito","Departamento Actualizado Correctamente",!1),setTimeout(()=>{swal.close(),cerrarVentana(".contenedor-altas",["#formAltas"]),traerDepartamentos()},1500)):0==o.exito&&SwalLoad("error","Error en la Transacción",o.errorSMS,!0),o.alertas&&SwalToast("warning",o.alertas.error,2500)}catch(a){console.error(a),SwalLoad("error","Error en la Conexión","Comunicate con el Administrador",!1)}}$((function(){asignarEventos(),inicializarPagina(),configurarBotones()}));
//# sourceMappingURL=departamentos.js.map
