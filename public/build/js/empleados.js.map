{"version":3,"sources":["empleados.js"],"names":["gridOptions","currentStep","asignarEventos","$","hide","document","addEventListener","e","key","resetearFormularioEmpleados","getElementById","async","event","preventDefault","show","focus","data","obtenerDepartamentosAC","mostrarListaSearch","obtenerEmpleadosAC","configurarBotones","click","mostrarContenedorAltas","validar","validateInputs","updateActiveClass","updateRemoveClass","val","crearUsuario","actualizarUsuario","inicializarPagina","iniciarTabla","headerName","field","width","cellRenderer","params","editButton","createElement","className","title","empleado_id","nombre","apellido_paterno","apellido_materno","fecha_nacimiento","sexo","curp","rfc","email","tel_principal","tel_secundario","estado","municipio","colonia","calle","num_exterior","num_interior","codigo_postal","estado_laboral","num_identificacion","nivel_academico","departamento_id","text","nombre_departamento","supervisor_id","empleado_nombre","actionContainer","classList","appendChild","headerClass","cellClass","filter","traerEmpleados","onQuickFilterChanged","newValue","value","gridApi","updateGridOptions","quickFilterText","cerrarVentana","removeClass","addClass","respuesta","fetch","method","json","convert","verificarArray","setGridOption","error","console","SwalToast","length","SwalLoad","configDropZone","Dropzone","options","testing","paramName","maxFiles","maxFilesize","acceptedFiles","init","this","on","file","size","removeFile","files","type","startsWith","alert","datos","FormData","append","body","log","exito","setTimeout","swal","close","errorSMS","alertas"],"mappings":"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","file":"empleados.js","sourcesContent":["let gridOptions;\r\nlet currentStep = 1;\r\nconfigDropZone();\r\n\r\n// Utilizando el Principio de Modularidad\r\n$(function () {\r\n    asignarEventos();\r\n    inicializarPagina();\r\n    configurarBotones();\r\n});\r\n\r\nfunction asignarEventos() {\r\n    // Ocultar Listados\r\n    $('.superSearch').hide();\r\n    $('.depaSearch').hide();\r\n\r\n    document.addEventListener(\"keydown\", e => {\r\n        if (e.key === 'Escape') {\r\n            resetearFormularioEmpleados();\r\n        }\r\n    });\r\n    \r\n    // Lista Departamentos\r\n    document.getElementById(\"departamento_id\").addEventListener(\"mousedown\", async function (event) {\r\n        event.preventDefault();\r\n        $('.depaSearch').show();\r\n        $('.inDepaSrch').focus();\r\n        let data = await obtenerDepartamentosAC();\r\n        const listSearch = await mostrarListaSearch(data, '.depaSearch', 'departamento_id', 'nombre');\r\n    });\r\n\r\n    // Lista Supervisor\r\n    document.getElementById(\"supervisor_id\").addEventListener(\"mousedown\", async function (event) {\r\n        event.preventDefault();\r\n        $('.superSearch').show();\r\n        $('.inSuperSrch').focus();\r\n        let data = await obtenerEmpleadosAC();\r\n        const listSearch = await mostrarListaSearch(data, '.superSearch', 'empleado_id', 'nombre');\r\n    });\r\n}\r\n\r\nfunction configurarBotones() {\r\n    // Evento Crear Usuarios\r\n    // Ocultar altas\r\n    $(\".contenedor-altas\").hide();\r\n\r\n    $(\"#crear-empleado\").click(mostrarContenedorAltas);\r\n\r\n    $(\".btnCancel\").click(e => {\r\n        currentStep = 1;\r\n\r\n        resetearFormularioEmpleados();\r\n    });\r\n\r\n    $(\".btn-next\").click(function (e) {\r\n        e.preventDefault(); // Prevenir el comportamiento predeterminado del botón  \r\n\r\n        // validar inputs del paso 1 para poder avanzar \r\n        let validar;\r\n\r\n        if (currentStep == 1) {\r\n            validar = validateInputs($('#empleado_formulario-personal'));\r\n        }\r\n\r\n        if (currentStep == 2) {\r\n            validar = validateInputs($('#empleado_formulario-contacto'));\r\n        }\r\n\r\n        if (validar) {\r\n            $(\"#paso\" + currentStep).hide();\r\n            currentStep++;\r\n            $(\"#paso\" + currentStep).show();\r\n\r\n            updateActiveClass();\r\n        }\r\n\r\n    });\r\n\r\n    $(\".btn-prev\").click(function (e) {\r\n        e.preventDefault(); // Prevenir el comportamiento predeterminado del botón\r\n        $(\"#paso\" + currentStep).hide();\r\n        currentStep--;\r\n        $(\"#paso\" + currentStep).show();\r\n        updateRemoveClass();\r\n    });\r\n\r\n    $(\"#btnGuardar\").click(e => {\r\n        let validar = validateInputs($('#empleado_formulario-laboral'));\r\n        if (validar) {\r\n            $('#empleado_id').val() == '' ? crearUsuario() : actualizarUsuario();\r\n        }\r\n    });\r\n\r\n    updateActiveClass();\r\n    updateRemoveClass();\r\n}\r\n\r\nfunction inicializarPagina() {\r\n    let columnDefs = [\r\n        {\r\n            headerName: 'id',\r\n            field: 'empleado_id',\r\n            width: 60\r\n        },\r\n        {\r\n            headerName: 'No. Empleado',\r\n            field: 'num_identificacion',\r\n            width: 120\r\n        },\r\n        {\r\n            headerName: 'Nombre',\r\n            field: 'nombre',\r\n            width: 130\r\n        },\r\n        {\r\n            headerName: 'Apellido Paterno',\r\n            field: 'apellido_paterno',\r\n            width: 140\r\n        },\r\n        {\r\n            headerName: 'Departamento',\r\n            field: 'nombre_departamento',\r\n            width: 130\r\n        },\r\n        {\r\n            headerName: 'Estatus',\r\n            field: 'estado_laboral',\r\n            width: 100\r\n        },\r\n        {\r\n            headerName: 'Correo',\r\n            field: 'email',\r\n            width: 150\r\n        },\r\n        {\r\n            headerName: 'Teléfono Principal',\r\n            field: 'tel_principal',\r\n            width: 150\r\n        },\r\n        {\r\n            headerName: 'Estado',\r\n            field: 'estado',\r\n            width: 150\r\n        },\r\n        {\r\n            headerName: 'Fecha de Creación',\r\n            field: 'fecha_creacion',\r\n            width: 150\r\n        },\r\n        {\r\n            headerName: 'Acción',\r\n            cellRenderer: function (params) {\r\n                const editButton = document.createElement('I');\r\n                editButton.className = \"fa-regular fa-pen-to-square btn btn-editar\";\r\n                editButton.title = 'Editar';\r\n\r\n                // Datos a Editar\r\n                editButton.addEventListener('click', async function () {\r\n                    await mostrarContenedorAltas();\r\n\r\n                    $('#empleado_id').val(params.data.empleado_id);\r\n                    $('#nombre').val(params.data.nombre);\r\n                    $('#apellido_paterno').val(params.data.apellido_paterno);\r\n                    $('#apellido_materno').val(params.data.apellido_materno);\r\n                    $('#fecha_nacimiento').val(params.data.fecha_nacimiento);\r\n                    $('#sexo').val(params.data.sexo);\r\n                    $('#curp').val(params.data.curp);\r\n                    $('#rfc').val(params.data.rfc);\r\n                    $('#email').val(params.data.email);\r\n                    $('#tel_principal').val(params.data.tel_principal);\r\n                    $('#tel_secundario').val(params.data.tel_secundario);\r\n                    $('#estado').val(params.data.estado);\r\n                    $('#municipio').val(params.data.municipio);\r\n                    $('#colonia').val(params.data.colonia);\r\n                    $('#calle').val(params.data.calle);\r\n                    $('#num_exterior').val(params.data.num_exterior);\r\n                    $('#num_interior').val(params.data.num_interior);\r\n                    $('#codigo_postal').val(params.data.codigo_postal);\r\n                    $('#estado_laboral').val(params.data.estado_laboral);\r\n                    $('#num_identificacion').val(params.data.num_identificacion);\r\n                    $('#nivel_academico').val(params.data.nivel_academico);\r\n\r\n                    $('#departamento_id option').val(params.data.departamento_id);\r\n                    $('#departamento_id option').text(params.data.nombre_departamento);\r\n\r\n                    $('#supervisor_id option').val(params.data.supervisor_id);\r\n                    $('#supervisor_id option').text(params.data.empleado_nombre);\r\n                    // console.log(params.data);\r\n                });\r\n\r\n                const actionContainer = document.createElement('div');\r\n                actionContainer.classList = \"btn-cont centrado\";\r\n                actionContainer.appendChild(editButton);\r\n\r\n                return actionContainer;\r\n            },\r\n            width: 150,\r\n            headerClass: 'txt-center',\r\n            cellClass: 'custom-action-cell', // Agregar la clase CSS 'custom-action-cell' a todas las celdas en esta columna\r\n            filter: false\r\n        }\r\n\r\n    ];\r\n\r\n    let data = '';\r\n    iniciarTabla(data, columnDefs, '#myGrid');\r\n    traerEmpleados();\r\n}\r\n\r\n/*  FUNCIONES  */\r\nfunction onQuickFilterChanged() {\r\n    var newValue = document.getElementById('quickFilter').value;\r\n    gridApi.updateGridOptions({ quickFilterText: newValue });\r\n}\r\n\r\nfunction resetearFormularioEmpleados() {\r\n    cerrarVentana('.contenedor-altas', ['#empleado_formulario-personal', '#empleado_formulario-contacto', '#empleado_formulario-laboral']);\r\n    $(\".altas_pasos p\").removeClass(\"pasoActivo circle-check\");\r\n    $(\"#paso1\").show();\r\n    $(\"#paso2\").hide();\r\n    $(\"#paso3\").hide();\r\n    $(\".paso1 p\").addClass(\"pasoActivo\");\r\n    currentStep = 1;\r\n}\r\n\r\nasync function mostrarContenedorAltas() {\r\n    $(\".contenedor-altas\").show();\r\n    await obtenerEmpleadosAC();\r\n    await obtenerDepartamentosAC();\r\n}\r\n\r\nasync function traerEmpleados() {\r\n    try {\r\n        const respuesta = await fetch('allEmpleados', {\r\n            method: 'GET',\r\n        });\r\n        const data = await respuesta.json();\r\n        // console.log(data);\r\n\r\n        let convert = verificarArray (data);\r\n        gridApi.setGridOption('rowData', convert);\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        SwalToast('warning', 'Error al obtener los usuarios', 2500);\r\n    }\r\n}\r\n\r\nasync function obtenerEmpleadosAC() {\r\n    try {\r\n        const respuesta = await fetch('empleados/activos', {\r\n            method: 'GET'\r\n        });\r\n        const data = await respuesta.json();\r\n        // console.log(data);\r\n\r\n        if (!data.length > 0) SwalToast('warning', 'No hay Empleados disponibles.', 2500);\r\n\r\n        return data;\r\n    } catch (error) {\r\n        console.error(error);\r\n        SwalLoad('error', 'Ocurrio Un Error', 'Conección Perdida a BD.', false);\r\n    }\r\n\r\n}\r\nasync function obtenerDepartamentosAC() {\r\n    try {\r\n        const respuesta = await fetch('departamentos/activos', {\r\n            method: 'GET'\r\n        });\r\n        const data = await respuesta.json();\r\n        // console.log(data);\r\n\r\n        // let empleadoSelect = document.getElementById('departamento_id');\r\n        // empleadoSelect.innerHTML = '';\r\n        // // Añadir la opción en blanco como la primera opción\r\n        // empleadoSelect.insertBefore(new Option('', ''), empleadoSelect.firstChild);\r\n\r\n        // data.length > 0 ? data.forEach(empleado => {\r\n        //     let option = document.createElement('option');\r\n        //     option.value = empleado.departamento_id;\r\n        //     option.textContent = empleado.nombre;\r\n        //     empleadoSelect.appendChild(option);\r\n        // }) : SwalToast('warning', 'No hay Departamentos disponibles.', 2500);\r\n\r\n        if (!data.length > 0) SwalToast('warning', 'No hay Departamentos disponibles.', 2500);\r\n\r\n        return data;\r\n    } catch (error) {\r\n        console.error(error);\r\n        SwalLoad('error', 'Ocurrio Un Error', 'Conección Perdida a BD.', false);\r\n    }\r\n}\r\nfunction updateActiveClass() {\r\n    $(\".empleado_pasos p\").removeClass(\"pasoActivo\");\r\n\r\n    if (currentStep === 1) {\r\n        $(\".paso1 p\").addClass(\"pasoActivo\");\r\n    } else if (currentStep === 2) {\r\n        $(\".paso2 p\").addClass(\"pasoActivo\");\r\n        $(\".paso1 p\").addClass(\"circle-check\");\r\n    } else if (currentStep === 3) {\r\n        $(\".paso3 p\").addClass(\"pasoActivo\");\r\n        $(\".paso2 p\").addClass(\"circle-check\");\r\n    }\r\n}\r\n\r\nfunction updateRemoveClass() {\r\n\r\n    $(\".empleado_pasos p\").removeClass(\"circle-check\");\r\n\r\n    if (currentStep === 1) {\r\n        $(\".paso1 p\").addClass(\"pasoActivo\");\r\n        $(\".paso2 p\").removeClass(\"pasoActivo\");\r\n    } else if (currentStep === 2) {\r\n        $(\".paso1 p\").addClass(\"circle-check\");\r\n        $(\".paso2 p\").addClass(\"pasoActivo\");\r\n        $(\".paso3 p\").removeClass(\"pasoActivo\");\r\n    }\r\n}\r\n\r\nfunction configDropZone() {\r\n    Dropzone.options.testing = {\r\n        paramName: \"file\", // El nombre que se usará para transferir el archivo\r\n        maxFiles: 1, // Limitar a una sola imagen\r\n        maxFilesize: 6, // MB\r\n        acceptedFiles: 'image/*', // Solo permitir archivos de tipo imagen\r\n        init: function () {\r\n            this.on(\"addedfile\", function (file) {\r\n\r\n                if (file.size > 6 * 1024 * 1024) { // Verificar si el tamaño del archivo supera 6MB\r\n                    this.removeFile(file); // Eliminar el archivo del Dropzone\r\n                }\r\n                if (this.files.length > 1) {\r\n                    this.removeFile(this.files[0]); // Si se añade más de un archivo, eliminar el primero\r\n                }\r\n                if (!file.type.startsWith('image/')) {\r\n                    alert(\"Solo se admiten imágenes\"); // Mostrar alerta si el archivo no es una imagen\r\n                    this.removeFile(file); // Eliminar el archivo del Dropzone\r\n                }\r\n            });\r\n        }\r\n    };\r\n}\r\n\r\nasync function crearUsuario() {\r\n\r\n    const nombre = $('#nombre').val();\r\n    const apellido_paterno = $('#apellido_paterno').val();\r\n    const apellido_materno = $('#apellido_materno').val();\r\n    const fecha_nacimiento = $('#fecha_nacimiento').val();\r\n    const sexo = $('#sexo').val();\r\n    const curp = $('#curp').val();\r\n    const rfc = $('#rfc').val();\r\n    const email = $('#email').val();\r\n    const tel_principal = $('#tel_principal').val();\r\n    const tel_secundario = $('#tel_secundario').val();\r\n    const estado = $('#estado').val();\r\n    const municipio = $('#municipio').val();\r\n    const colonia = $('#colonia').val();\r\n    const calle = $('#calle').val();\r\n    const num_exterior = $('#num_exterior').val();\r\n    const num_interior = $('#num_interior').val();\r\n    const codigo_postal = $('#codigo_postal').val();\r\n    const estado_laboral = $('#estado_laboral').val();\r\n    const num_identificacion = $('#num_identificacion').val();\r\n    const nivel_academico = $('#nivel_academico').val();\r\n    const supervisor_id = $('#supervisor_id').val();\r\n    const departamento_id = $('#departamento_id').val();\r\n    const testing = $('#testing').val();\r\n    \r\n\r\n    try {\r\n\r\n        const datos = new FormData();\r\n        datos.append('nombre', nombre);\r\n        datos.append('apellido_paterno', apellido_paterno);\r\n        datos.append('apellido_materno', apellido_materno);\r\n        datos.append('fecha_nacimiento', fecha_nacimiento);\r\n        datos.append('sexo', sexo);\r\n        datos.append('curp', curp);\r\n        datos.append('rfc', rfc);\r\n        datos.append('email', email);\r\n        datos.append('tel_principal', tel_principal);\r\n        datos.append('tel_secundario', tel_secundario);\r\n        datos.append('estado', estado);\r\n        datos.append('municipio', municipio);\r\n        datos.append('colonia', colonia);\r\n        datos.append('calle', calle);\r\n        datos.append('num_exterior', num_exterior);\r\n        datos.append('num_interior', num_interior);\r\n        datos.append('codigo_postal', codigo_postal);\r\n        datos.append('estado_laboral', estado_laboral);\r\n        datos.append('num_identificacion', num_identificacion);\r\n        datos.append('nivel_academico', nivel_academico);\r\n        datos.append('supervisor_id', supervisor_id);\r\n        datos.append('departamento_id', departamento_id);\r\n        datos.append('testing', testing);\r\n\r\n        const respuesta = await fetch('crear/empleado', {\r\n            method: 'POST',\r\n            body: datos\r\n        });\r\n\r\n        const data = await respuesta.json();\r\n        console.log(data);\r\n\r\n        if (data.exito == 1) {\r\n            // Registro Creado Exitosamente\r\n            SwalLoad('success', 'Éxito', 'Registro Creado Correctamente', false);\r\n            setTimeout(() => {\r\n                swal.close();\r\n                resetearFormularioEmpleados();\r\n                traerEmpleados();\r\n            }, 1500);\r\n        } else if (data.exito == 0) {\r\n            SwalLoad('error', 'Error en la Transacción', data.errorSMS, true);\r\n        }\r\n        if (data.alertas) {\r\n            SwalToast('warning', data.alertas.error, 2500);\r\n        }\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        SwalLoad('error', 'Error en la Conexión', 'Comunicate con el Administrador', false);\r\n    }\r\n\r\n}\r\n\r\nasync function actualizarUsuario() {\r\n\r\n\r\n    const empleado_id = $('#empleado_id').val();\r\n    const nombre = $('#nombre').val();\r\n    const apellido_paterno = $('#apellido_paterno').val();\r\n    const apellido_materno = $('#apellido_materno').val();\r\n    const fecha_nacimiento = $('#fecha_nacimiento').val();\r\n    const sexo = $('#sexo').val();\r\n    const curp = $('#curp').val();\r\n    const rfc = $('#rfc').val();\r\n    const email = $('#email').val();\r\n    const tel_principal = $('#tel_principal').val();\r\n    const tel_secundario = $('#tel_secundario').val();\r\n    const estado = $('#estado').val();\r\n    const municipio = $('#municipio').val();\r\n    const colonia = $('#colonia').val();\r\n    const calle = $('#calle').val();\r\n    const num_exterior = $('#num_exterior').val();\r\n    const num_interior = $('#num_interior').val();\r\n    const codigo_postal = $('#codigo_postal').val();\r\n    const estado_laboral = $('#estado_laboral').val();\r\n    const num_identificacion = $('#num_identificacion').val();\r\n    const nivel_academico = $('#nivel_academico').val();\r\n    const supervisor_id = $('#supervisor_id').val();\r\n    const departamento_id = $('#departamento_id').val();\r\n\r\n    try {\r\n\r\n        const datos = new FormData();\r\n        datos.append('empleado_id', empleado_id);\r\n        datos.append('nombre', nombre);\r\n        datos.append('apellido_paterno', apellido_paterno);\r\n        datos.append('apellido_materno', apellido_materno);\r\n        datos.append('fecha_nacimiento', fecha_nacimiento);\r\n        datos.append('sexo', sexo);\r\n        datos.append('curp', curp);\r\n        datos.append('rfc', rfc);\r\n        datos.append('email', email);\r\n        datos.append('tel_principal', tel_principal);\r\n        datos.append('tel_secundario', tel_secundario);\r\n        datos.append('estado', estado);\r\n        datos.append('municipio', municipio);\r\n        datos.append('colonia', colonia);\r\n        datos.append('calle', calle);\r\n        datos.append('num_exterior', num_exterior);\r\n        datos.append('num_interior', num_interior);\r\n        datos.append('codigo_postal', codigo_postal);\r\n        datos.append('estado_laboral', estado_laboral);\r\n        datos.append('num_identificacion', num_identificacion);\r\n        datos.append('nivel_academico', nivel_academico);\r\n        datos.append('supervisor_id', supervisor_id);\r\n        datos.append('departamento_id', departamento_id);\r\n\r\n        const respuesta = await fetch('actualizar/empleado', {\r\n            method: 'POST',\r\n            body: datos\r\n        });\r\n        const data = await respuesta.json();\r\n\r\n        if (data.exito == 1) {\r\n            // Registro Creado Exitosamente\r\n            SwalLoad('success', 'Éxito', 'Registro Actualizado Correctamente', false);\r\n            setTimeout(() => {\r\n                swal.close();\r\n                resetearFormularioEmpleados();\r\n                traerEmpleados();\r\n            }, 1500);\r\n        } else if (data.exito == 0) {\r\n            SwalLoad('error', 'Error en la Transacción', data.errorSMS, true);\r\n        }\r\n\r\n        if (data.alertas) {\r\n            SwalToast('warning', data.alertas.error, 2500);\r\n        }\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        SwalLoad('error', 'Error en la Conexión', 'Comunicate con el Administrador', false);\r\n    }\r\n\r\n}"]}