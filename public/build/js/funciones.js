let gridApi;const tablas={};function SwalToast(e,t,n){Swal.fire({icon:e,title:t,toast:!0,position:"top-end",showConfirmButton:!1,timer:n,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}})}function SwalLoad(e,t,n,o){Swal.fire({icon:e,title:t,text:n,allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:o})}function iniciarTabla(e,t,n){if(!e||e.length<6){const t=6-(e?e.length:0),n=Array.from({length:t},()=>({}));e=e?[...e,...n]:n}gridOptions={defaultColDef:{resizable:!0,filter:"agTextColumnFilter",cellDataType:!1},rowSelection:"multiple",columnDefs:t,rowData:e,pagination:!0,onGridReady:function(e){e.api.addEventListener("cellClicked",(function(t){const n=e.api,o=t.rowIndex,r=n.getDisplayedRowCount();if(o===r-1){const e=n.getDisplayedRowAtIndex(r-1),t=e&&e.data;if(t&&Object.values(t).every(e=>null===e||""===e)){const e={};n.applyTransaction({add:[e]})}}}))},overlayLoadingTemplate:'<div aria-live="polite" aria-atomic="true" style="position:absolute;top:0;left:0;right:0; bottom:0; background: url(\thttps://ag-grid.com/images/ag-grid-loading-spinner.svg) center no-repeat" aria-label="loading"></div>',localeText:{filterOoo:"Filtro...",equals:"Igual",notEqual:"No igual",blank:"En blanco",notBlank:"No en blanco",contains:"Contiene",notContains:"No contiene",startsWith:"Empieza con",endsWith:"Termina con",dateFormatOoo:"yyyy-mm-dd",before:"Antes",after:"Después",inRange:"Entre",andCondition:"AND",orCondition:"OR",applyFilter:"Apply",resetFilter:"Reset",clearFilter:"Clear",cancelFilter:"Cancel",totalRows:"Total Rows",totalAndFilteredRows:"Rows",more:"More",to:"a",of:"de ",page:"Página",pageLastRowUnknown:"?",nextPage:"Next Page",lastPage:"Last Page",firstPage:"First Page",previousPage:"Previous Page",pageSizeSelectorLabel:"Tamaño de Páginas:",footerTotal:"Total"}};let o=document.querySelector(n);gridApi=agGrid.createGrid(o,gridOptions),tablas[n]=gridApi}function filtrarTabla(e,t){const n=tablas[e];n&&n.setGridOption("quickFilterText",t)}function limpiarForm(e){$(e)[0]&&($(e)[0].reset(),$(`${e} .campoRequerido, ${e} .errorInput`).removeClass("campoRequerido errorInput"))}function resetearTabla(e,t){if(tablas[e]){tablas[e].destroy(),$(t).val(""),delete tablas[e];const n=Object.keys(tablas);gridApi=n.length>0?tablas[n[0]]:null}}async function cerrarVentana(e,t){$(e).hide(),t.forEach((function(e){$(e).trigger("reset"),$(e).find(".errorInput, .campoRequerido").removeClass("errorInput campoRequerido"),$(e).find("select").each((function(){var e=$(this).find("option:first");e.val(""),e.text("")}))}))}function resetLista(e){$(e).empty()}function validateInputs(e){let t=!0;return e.find("label").each((function(){if($(this).hasClass("labelImportant")){const e=$(this).parent().find("input, select");""===e.val()?(e.addClass("campoRequerido"),$(this).closest(".form-group").addClass("errorInput"),$(this).focus(),t=!1):(e.removeClass("campoRequerido"),$(this).closest(".form-group").removeClass("errorInput"))}})),t}function getDataFromGrid(){let e=[];return gridApi.forEachNode(t=>e.push(t.data)),e}function seleccionTxt(...e){e.forEach(e=>{$(document).on("focus","#"+e,(function(){$("#"+e).select()}))})}function sinComa(e){return e.replace(/,/g,"")}function conComa(e){return e.replace(/\B(?=(\d{3})+(?!\d))/g,",")}function verificarArray(e){return Array.isArray(e)?e:[e]}function aplicarMascaraCantidad(...e){e.forEach(e=>{$("#"+e).inputmask({alias:"currency",prefix:"",suffix:"",allowMinus:!1,thousandsSeparator:",",decimalSeparator:".",digits:2,max:99999999.99})})}function aplicarMascaraKm(...e){e.forEach(e=>{$("#"+e).inputmask({alias:"numeric",prefix:"",suffix:" Km",allowMinus:!1,autoUnmask:!0,greedy:!1,groupSeparator:",",placeholder:"0",rightAlign:!1})})}async function createDataTable(e,t,n,o,r){return new Promise((function(a,i){try{let i=document.createElement("div");i.className="contenedorKey";let p=document.createElement("div");p.className="flex-titulo",p.style.width=n+"px";let f=document.createElement("H3");f.innerHTML=r;let m=document.createElement("I");m.className="fa-solid fa-xmark cerrar-tablakey";var l=document.createElement("table");l.id="tableKey",l.className="display",l.style.width="100%";var s=document.createElement("thead"),c=document.createElement("tr");Object.keys(e[0]);t.forEach((function(e){var t=document.createElement("th");t.textContent=e,c.appendChild(t)})),s.appendChild(c),l.appendChild(s);var d=document.createElement("tbody");e.forEach((function(e){var n=document.createElement("tr");t.forEach((function(t){var o=e[t],r=document.createElement("td");r.textContent=o,n.appendChild(r)})),d.appendChild(n)})),l.appendChild(d);var u=document.getElementById("listKey");i.appendChild(p),p.appendChild(f),p.appendChild(m),i.appendChild(l),u.appendChild(i),$("#tableKey").DataTable({fixedColumns:!0,keys:!0,paging:!0,scrollCollapse:!0,scrollY:o+"px",language:{search:"Buscar:",info:"Mostrando _END_ de _TOTAL_ Registros",infoEmpty:"No Hay Registros",zeroRecords:"No Se Encontraron Registros",infoFiltered:"(Filtrado de _MAX_ Registros Totales)",lengthMenu:"_MENU_ Entradas por página"}}),document.getElementById("tableKey_wrapper").style.width=n+"px",$(".cerrar-tablakey").on("click",(function(){resetLista("#listKey")})),$("#tableKey").on("dblclick","tbody td",(function(){var e=$(this).closest("tr").children("td").map((function(){return $(this).text()})).get();resetLista("#listKey"),a(e)})),document.addEventListener("keydown",(function(e){if("Enter"===e.key){const e=document.querySelector("#tableKey");if(e){const t=e.querySelector("td.focus");if(t){const e=t.closest("tr");if(e){const t=e.querySelectorAll("td"),n=[];t.forEach((function(e){n.push(e.textContent.trim())})),console.log(n),resetLista("#listKey"),a(n)}}}}}))}catch(e){console.error("Error al obtener y mostrar los datos:",e),i("error")}}))}async function mostrarListaSearch(e,t,n,o,r){return new Promise((a,i)=>{try{let d=$(t),u=d.find("input"),p=d.parent().find("select"),f=-1;function l(){const e=d.find("option");e.removeClass("listOption"),-1!==f&&e.eq(f).addClass("listOption")}function s(){let i=$(u).val().trim().toLowerCase(),l=e.filter((function(e){return(e[o]?e[o].toLowerCase():"").includes(i)})).slice(0,5);if(document.querySelectorAll(t+" option").forEach((function(e){e.remove()})),r){let e={[n]:"nuevo",[o]:"Nuevo"};l.unshift(e)}l.length>0?l.forEach((function(e){let t=$("<option>").val(e[n]).text(e[o]);d.append(t),t.on("mousedown",(function(n){n.preventDefault(),p.empty(),"nuevo"===t.val()?(p.append(""),c(),a("nuevo")):(p.append(t),c(),a(e))}))})):d.append("<option disabled>No se encontraron resultados</option>")}function c(){document.querySelectorAll(t+" option").forEach((function(e){e.remove()})),$(u).val(""),$(t).hide(),f=-1}0!==!u.length&&0!==!p.length||i("No se encontro HTML"),s(),$(u).on("input blur",(function(e){"input"===e.type?s():"blur"===e.type&&c()})),$(u).on("keydown",(function(o){const r=d.find("option"),i=r.length;if("ArrowDown"===o.key)o.preventDefault(),f=(f+1)%i,l();else if("ArrowUp"===o.key)o.preventDefault(),f=-1===f||0===f?i-1:(f-1+i)%i,l();else if("Enter"===o.key&&-1!==f){o.preventDefault();let i=r.eq(f);if(p.empty(),"nuevo"===i.val())a("nuevo");else{let o=i.clone();p.append(o);let r=i.val(),l=e.find(e=>e[n]===parseInt(r));f=-1,$(t).hide(),a(l)}}}))}catch(e){console.error("Error al obtener y mostrar los datos:",e),i("error")}})}async function mostrarListaSearchs(e,t,n,o){return new Promise((r,a)=>{try{e.length<1&&a("No hay data");let c=$(t),d=c.find("input"),u=c.parent().find("select"),p=-1;function i(){const e=c.find("option");e.removeClass("listOption"),-1!==p&&e.eq(p).addClass("listOption")}function l(){let a=$(d).val().trim().toLowerCase(),i=e.filter((function(e){return(e[o]?e[o].toLowerCase():"").includes(a)})).slice(0,5);document.querySelectorAll(t+" option").forEach((function(e){e.remove()})),i.length>0?i.forEach((function(e){let t=$("<option>").val(e[n]).text(e[o]);c.append(t),t.on("mousedown",(function(n){n.preventDefault(),u.empty(),u.append(t),s(),r(e)}))})):c.append("<option disabled>No se encontraron resultados</option>")}function s(){document.querySelectorAll(t+" option").forEach((function(e){e.remove()})),$(d).val(""),$(t).hide(),p=-1}0!==!d.length&&0!==!u.length||a("No se encontro HTML"),l(),$(d).on("input blur",(function(e){"input"===e.type?l():"blur"===e.type&&s()})),$(d).on("keydown",(function(o){const a=c.find("option"),l=a.length;if("ArrowDown"===o.key)o.preventDefault(),p=(p+1)%l,i();else if("ArrowUp"===o.key)o.preventDefault(),p=-1===p||0===p?l-1:(p-1+l)%l,i();else if("Enter"===o.key&&-1!==p){o.preventDefault();let i=a.eq(p);u.empty();let l=i.clone();u.append(l);let s=i.val(),c=e.find(e=>e[n]===parseInt(s));p=-1,$(t).hide(),r(c)}}))}catch(e){console.error("Error al obtener y mostrar los datos:",e),a("error")}})}async function mostrarListaGrid(e,t,n,o){return new Promise((r,a)=>{try{const a=document.querySelector(n);a.style.zIndex=10,a.style.position="absolute",a.style.backgroundColor="white";const c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("id","filtro_search"),c.setAttribute("placeholder","Buscar..."),c.setAttribute("autocomplete","off");const d=document.createElement("i");d.classList.add("fa-solid","fa-magnifying-glass");const u=document.createElement("div");u.classList.add("container","Search"),u.setAttribute("id","filtro_list");const p=document.createElement("div");if(p.appendChild(c),p.appendChild(d),a.appendChild(p),a.appendChild(u),!a)return;const f=()=>{const t=document.querySelector(o);if(!t)return;const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=n.top-r.top+t.scrollTop+e.clientHeight;a&&(a.style.left=n.left+"px",a.style.top=i+"px")};if(document.querySelector("#filtro_list ul option"))return;$(a).show();const m=document.createElement("ul");t.length>0&&t.forEach((function(e){let t=$("<option>").val(e.id).text(e.nombre);m.appendChild(t[0])})),u.appendChild(m);const g=document.querySelector(o);g&&(g.appendChild(a),f());const h=function(t){a.contains(t.target)||m.contains(t.target)||t.target===e||($(a).hide(),$(m).empty(),s(),document.removeEventListener("click",h),g.removeEventListener("scroll",f))};document.addEventListener("click",h),c.focus();let y=-1;async function i(){const e=$(m).find("option");e.removeClass("listOption"),-1!==y&&e.eq(y).addClass("listOption")}function l(){let e=$(c).val().trim().toLowerCase(),n=t.filter((function(t){let n=(t.nombre||"").trim().toLowerCase();return n.includes(e)&&n.length>0})).slice(0,6);$(m).empty(),n.length>0?n.forEach((function(e){let t=$("<option>").val(e.id).text(e.nombre);$(m).append(t),t.on("mousedown",(function(n){n.preventDefault(),$(u).empty(),m.append(t),r(e),s()}))})):$(m).append("<option disabled>No se encontraron resultados</option>"),y=-1,i()}function s(){$(a).hide(),$(a).empty(),$(m).empty(),$(u).empty(),y=-1}$(c).keydown(async e=>{const n=$(m).find("option"),o=n.length;if("ArrowDown"===e.key)e.preventDefault(),y=(y+1)%o,await i();else if("ArrowUp"===e.key)e.preventDefault(),y=-1===y||0===y?o-1:(y-1+o)%o,i();else if("Enter"===e.key&&-1!==y){e.preventDefault();let o=n.eq(y),a=o.clone();m.append(a);let i=o.val(),l=t.find(e=>e.id===parseInt(i));r(l),s()}}),l(),$(c).on("input blur",(function(e){"input"===e.type?l():"blur"===e.type&&s()}))}catch(e){console.error("Error al obtener y mostrar los datos:",e),a("error")}})}function setFechaActual(e){let t=document.getElementById(e),n=new Date,o=n.getDate().toString().padStart(2,"0")+"/"+(n.getMonth()+1).toString().padStart(2,"0")+"/"+n.getFullYear();t.value=o}function obtenerFechaActual(){let e=new Date,t=e.getDate().toString().padStart(2,"0"),n=(e.getMonth()+1).toString().padStart(2,"0");return e.getFullYear()+"/"+n+"/"+t}function formatearFecha(e){if(!e)return null;if((e=e.toString()).match(/^\d{4}-\d{2}-\d{2}$/)){const[t,n,o]=e.split("-");return`${t}/${n}/${o}`}let t=new Date(e);if(!isNaN(t.getTime())){let e=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0");return`${t.getFullYear()}/${n}/${e}`}return e}function formatearFechaYear(e){if("string"==typeof e){if(/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(e))return e.includes("-")&&(e=e.replace(/-/g,"/")),e;e=new Date(e)}else if(!(e instanceof Date))return"";return`${e.getFullYear()}/${(e.getMonth()+1).toString().padStart(2,"0")}/${e.getDate().toString().padStart(2,"0")}`}function obtenerDia(e){if(!e)return null;const t=e.split("/");if(3===t.length){const[e,n,o]=t;return o}return null}function formatearFechaCompleta(e){let t=new Date(e);if(isNaN(t.getTime()))return null;let n=t.getDate(),o=t.getMonth()+1,r=t.getFullYear();return`${n.toString().padStart(2,"0")}/${o.toString().padStart(2,"0")}/${r}`}function convertirAFecha(e){if(!e)return null;const t=e.split("/"),n=parseInt(t[0],10),o=parseInt(t[1],10)-1,r=parseInt(t[2],10);return new Date(n,o,r)}function calcularDiferenciaDias(e,t){if(!e||!t)return null;const n=convertirAFecha(e);return(convertirAFecha(t).getTime()-n.getTime())/864e5}function formatearHoraFloat(e){const t=e.match(/(\d+):(\d+)/);if(t){return((60*parseInt(t[1])+parseInt(t[2]))/60).toFixed(2)}return null}async function formatoHora(e){let t=0,n=0;if(e)if(e.includes(":")){const o=e.split(":");t=o[0],n=o[1]}else t=e;else t=e;const o=parseFloat(t),r=parseFloat(n),a=`${o.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`;return/^(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])$/.test(a)?a:"00:00"}function limpiarRuta(e){document.getElementById(e).querySelectorAll("select").forEach((function(e){let t=e.id,n=e.querySelector("option");t.includes("origen")?n.text="Origen":t.includes("destino")?n.text="Destino":console.log("No se reconoce el tipo")}))}async function deshabilitarElemento(...e){e.forEach(e=>{document.getElementById(e).classList.add("disabled-element")})}async function habilitarElemento(...e){e.forEach(e=>{document.getElementById(e).classList.remove("disabled-element")})}
//# sourceMappingURL=funciones.js.map
