let gridOptions;function asignarEventos(){document.addEventListener("keydown",a=>{"Escape"===a.key&&resetFormAeronave()}),aplicarMascaraKm("ktas")}function configurarBotones(){$(".contenedor-altas").hide(),$("#crear-aeronave").click(mostrarContenedorAltas),$(".btn-cancelar").click(a=>{resetFormAeronave()}),$("#btnGuardar").click(a=>{validateInputs($("#formAltas"))&&(""==$("#aeronave_id").val()?crearAeronave():actualizarAeronave())})}function inicializarPagina(){iniciarTabla("",[{headerName:"id",field:"aeronave_id",width:80},{headerName:"Número Serie",field:"numero_serie",width:120},{headerName:"Modelo",field:"modelo",width:150},{headerName:"Fabricante",field:"fabricante",width:100},{headerName:"Matricula",field:"matricula",width:120},{headerName:"asientos",field:"asientos",width:100},{headerName:"Velocidad Máxima",field:"ktas",width:130},{headerName:"Horas Vuelo",field:"horas_vuelo",width:120},{headerName:"Estado Actual",field:"estado_actual",width:130},{headerName:"Acción",cellRenderer:function(a){const e=document.createElement("I");e.className="fa-regular fa-pen-to-square btn btn-editar",e.title="Editar",e.addEventListener("click",(async function(){await mostrarContenedorAltas(),$("#aeronave_id").val(a.data.aeronave_id),$("#modelo").val(a.data.modelo),$("#ktas").val(a.data.ktas),$("#matricula").val(a.data.matricula),$("#fabricante").val(a.data.fabricante),$("#numero_serie").val(a.data.numero_serie),$("#anio_fabricante").val(a.data.anio_fabricante),$("#asientos").val(a.data.asientos),$("#ultima_revision").val(a.data.ultima_revision),$("#horas").val(a.data.horas),$("#estado_actual").val(a.data.estado_actual),$("#fecha_retiro").val(a.data.fecha_retiro)}));const r=document.createElement("div");return r.classList="btn-cont centrado",r.appendChild(e),r},width:150,headerClass:"txt-center",cellClass:"custom-action-cell",filter:!1}],"#myGrid"),traerAeronaves()}async function traerAeronaves(){try{const a=await fetch("allAeronaves",{method:"GET"}),e=await a.json();let r=verificarArray(e);gridApi.setGridOption("rowData",r)}catch(a){console.error(a),SwalToast("warning","Error al obtener los usuarios",2500)}}async function mostrarContenedorAltas(){$(".contenedor-altas").show()}function resetFormAeronave(){cerrarVentana(".contenedor-altas",["#formAltas"])}async function crearAeronave(){const a=$("#modelo").val(),e=$("#ktas").val(),r=$("#matricula").val(),t=$("#fabricante").val(),o=$("#numero_serie").val(),n=$("#anio_fabricante").val(),i=$("#asientos").val(),l=$("#ultima_revision").val(),s=$("#horas").val(),c=$("#estado_actual").val(),d=$("#fecha_retiro").val();try{const v=new FormData;v.append("modelo",a),v.append("ktas",e),v.append("matricula",r),v.append("fabricante",t),v.append("numero_serie",o),v.append("anio_fabricante",n),v.append("asientos",i),v.append("ultima_revision",l),v.append("horas",s),v.append("estado_actual",c),v.append("fecha_retiro",d);const m=await fetch("crear/aeronave",{method:"POST",body:v}),u=await m.json();1==u.exito?(SwalLoad("success","Éxito","Registro Creado Correctamente",!1),setTimeout(()=>{swal.close(),resetFormAeronave(),traerAeronaves()},1500)):0==u.exito&&SwalLoad("error","Error en la Transacción",u.errorSMS,!0),u.alertas&&SwalToast("warning",u.alertas.error,2500)}catch(a){console.error(a),SwalLoad("error","Error en la Conexión","Comunicate con el Administrador",!1)}}async function actualizarAeronave(){const a=$("#aeronave_id").val(),e=$("#modelo").val(),r=$("#ktas").val(),t=$("#matricula").val(),o=$("#fabricante").val(),n=$("#numero_serie").val(),i=$("#anio_fabricante").val(),l=$("#asientos").val(),s=$("#ultima_revision").val(),c=$("#horas").val(),d=$("#estado_actual").val(),v=$("#fecha_retiro").val();try{const m=new FormData;m.append("aeronave_id",a),m.append("modelo",e),m.append("ktas",r),m.append("matricula",t),m.append("fabricante",o),m.append("numero_serie",n),m.append("anio_fabricante",i),m.append("asientos",l),m.append("ultima_revision",s),m.append("horas",c),m.append("estado_actual",d),m.append("fecha_retiro",v);const u=await fetch("actualizar/aeronave",{method:"POST",body:m}),p=await u.json();1==p.exito?(SwalLoad("success","Éxito","Registro Actualizado Correctamente",!1),setTimeout(()=>{swal.close(),resetFormAeronave(),traerAeronaves()},1500)):0==p.exito&&SwalLoad("error","Error en la Transacción",p.errorSMS,!0),p.alertas&&SwalToast("warning",p.alertas.error,2500)}catch(a){console.error(a),SwalLoad("error","Error en la Conexión","Comunicate con el Administrador",!1)}}$((function(){asignarEventos(),inicializarPagina(),configurarBotones()}));
//# sourceMappingURL=aeronaves.js.map
